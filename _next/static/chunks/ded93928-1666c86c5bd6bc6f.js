"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{87461:function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(12475),e=c(68825),f=c(66521),g=c(36805),h=c(22822),i=c(54098);function j(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}function k(a){if(a&&a.__esModule)return a;var b=Object.create(null);return a&&Object.keys(a).forEach(function(c){if("default"!==c){var d=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(b,c,d.get?d:{enumerable:!0,get:function(){return a[c]}})}}),b.default=a,Object.freeze(b)}var l=j(d),m=j(e),n=j(f),o=k(g),p=k(i);function q(a){let b=a;return"object"==typeof b&&"object"==typeof b.internal_resourceInfo}function r(a){let b=a;return"object"==typeof b&&"object"==typeof b.internal_resourceInfo&&"object"==typeof b.internal_resourceInfo.linkedResources}function s(a){let b=a;return"object"==typeof b.internal_changeLog&&Array.isArray(b.internal_changeLog.additions)&&Array.isArray(b.internal_changeLog.deletions)}class t extends Error{}function u(a){return"string"==typeof a?a:a.value}let v=async(a,b)=>{let d=c(54098);return d(a,b)};function w(a){var b,c,d,e,f;let g=null!==(c=null===(b=a.headers.get("Content-Type"))|| void 0===b?void 0:b.split(";"))&& void 0!==c?c:[],h=g.length>0&&["text/turtle","application/ld+json"].includes(g[0]),i={sourceIri:a.url,isRawData:!h,contentLocation:null!==(d=a.headers.get("Content-Location"))&& void 0!==d?d:void 0,contentType:null!==(e=a.headers.get("Content-Type"))&& void 0!==e?e:void 0,linkedResources:{},location:null!==(f=a.headers.get("Location"))&& void 0!==f?f:void 0},j=a.headers.get("Link");if(j){let k=l.default.parse(j),m=k.get("rel","acl");1===m.length&&(i.aclUrl=new URL(m[0].uri,i.sourceIri).href),i.linkedResources=k.refs.reduce((a,b)=>{var c,d;return null!==(c=a[d=b.rel])&& void 0!==c||(a[d]=[]),a[b.rel].push(new URL(b.uri,i.sourceIri).href),a},i.linkedResources)}let n=a.headers.get("WAC-Allow");return n&&(i.permissions=x(n)),i}function x(a){function b(a){let b=a.split(" "),c=b.includes("write");return c?{read:b.includes("read"),append:!0,write:!0,control:b.includes("control")}:{read:b.includes("read"),append:b.includes("append"),write:!1,control:b.includes("control")}}function c(a,b){let c=a.split(",").map(a=>a.split("=")).filter(a=>2===a.length&&a[0].trim()===b);if(1!==c.length)return"";let d=c[0][1].trim();return'"'!==d.charAt(0)||'"'!==d.charAt(d.length-1)?"":d.substring(1,d.length-1)}return{user:b(c(a,"user")),public:b(c(a,"public"))}}function y(a){let b;return"function"==typeof a.slice?Object.assign(a.slice(),Object.assign({},a)):Object.assign({},a)}function z(a){return!a.ok}let A={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},B={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},C={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},D={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},E={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},F={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},G={publicKey:"https://w3id.org/security#publicKey"},H={storage:"http://www.w3.org/ns/pim/space#storage"},I={fetch:v};async function J(a,b=Object.assign(Object.assign({},I),{ignoreAuthenticationErrors:!1})){var c;let d=Object.assign(Object.assign({},I),b),e=await d.fetch(a,{method:"HEAD"});return K(e,{ignoreAuthenticationErrors:null!==(c=b.ignoreAuthenticationErrors)&& void 0!==c&&c})}function K(a,b={ignoreAuthenticationErrors:!1}){var c;if(z(a)&&(401!==(c=a).status&&403!==c.status||!b.ignoreAuthenticationErrors))throw new R(`Fetching the metadata of the Resource at [${a.url}] failed: [${a.status}] [${a.statusText}].`,a);let d=w(a);return{internal_resourceInfo:d}}function L(a){let b=q(a)?N(a):u(a);return b.endsWith("/")}function M(a){var b;return null!==(b=a.internal_resourceInfo.contentType)&& void 0!==b?b:null}function N(a){return q(a)?a.internal_resourceInfo.sourceIri:null}let O=N;function P(a){var b;if(!r(a))return null;let c=null!==(b=Q(a)["http://www.w3.org/ns/solid/terms#podOwner"])&& void 0!==b?b:[];return 1===c.length?c[0]:null}function Q(a){return a.internal_resourceInfo.linkedResources}class R extends t{constructor(a,b){super(a),this.response=b}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}}let S={fetch:v},T=["Slug","If-None-Match","Content-Type"];async function U(a,b=S){let c=Object.assign(Object.assign({},S),b),d=u(a),e=await c.fetch(d,c.init);if(z(e))throw new R(`Fetching the File failed: [${e.status}] [${e.statusText}].`,e);let f=w(e),g=await e.blob(),h=Object.assign(g,{internal_resourceInfo:f});return h}async function V(a,b=S){let c=Object.assign(Object.assign({},S),b),d=q(a)?u(O(a)):u(a),e=await c.fetch(d,Object.assign(Object.assign({},c.init),{method:"DELETE"}));if(z(e))throw new R(`Deleting the file at [${d}] failed: [${e.status}] [${e.statusText}].`,e)}async function W(a,b,c=S){let d=u(a),e=await Y(d,b,"POST",c);if(z(e))throw new R(`Saving the file in [${a}] failed: [${e.status}] [${e.statusText}].`,e);let f=e.headers.get("Location");if(null===f)throw Error("Could not determine the location of the newly saved file.");let g=new URL(f,new URL(d).origin).href,h=y(b),i={internal_resourceInfo:{isRawData:!0,sourceIri:g,contentType:Z(b,c.contentType)}};return Object.assign(h,i)}async function X(a,b,c=S){let d=u(a),e=await Y(d,b,"PUT",c);if(z(e))throw new R(`Overwriting the file at [${d}] failed: [${e.status}] [${e.statusText}].`,e);let f=y(b),g=w(e);return g.sourceIri=d,g.isRawData=!0,Object.assign(f,{internal_resourceInfo:g})}async function Y(a,b,c,d){var e,f,g;let h=Object.assign(Object.assign({},S),d),i=function(a){var b,c;if(void 0===a)return{};let d={};return Array.isArray(b=a)?a.forEach(([a,b])=>{d[a]=b}):"function"==typeof(c=a).forEach?a.forEach((a,b)=>{d[b]=a}):d=a,d}(null!==(f=null===(e=h.init)|| void 0===e?void 0:e.headers)&& void 0!==f?f:{});if(g=i,T.some(a=>void 0!==g[a]))throw Error(`No reserved header (${T.join(", ")}) should be set in the optional RequestInit.`);void 0!==h.slug&&(i.Slug=h.slug),i["Content-Type"]=Z(b,d.contentType);let j=u(a);return h.fetch(j,Object.assign(Object.assign({},h.init),{headers:i,method:c,body:b}))}function Z(a,b){if("string"==typeof b)return b;let c="object"==typeof a&&null!==a&&"string"==typeof a.type&&a.type.length>0?a.type:void 0;return null!=c?c:"application/octet-stream"}n.default.dataset;let $="https://inrupt.com/.well-known/sdk-local-node/",{freeze:_}=Object;function aa(a){return a.substring(0,$.length)===$}function ab(a){return a.substring($.length)}function ac(a){return"string"==typeof a&&"_:"===a.substring(0,2)}function ad(a){return a.substring(2)}function ae(a){return`_:${a.value}`}let af={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function ag(a){return"true"===a||"1"===a||"false"!==a&&"0"!==a&&null}function ah(a){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(a))return null;let[b,c]=ak(a),[d,e,f]=b.split(":"),g=Number.parseInt(d,10),h=Number.parseInt(e,10),[i,j]=f.split("."),k=Number.parseInt(i,10),l=j?Number.parseInt(j,10):void 0;h>=60&&(g+=1,h-=60);let m={hour:g,minute:h,second:k};if("number"==typeof l&&(m.millisecond=l),"string"==typeof c){let[n,o]=al(c);if("number"!=typeof n||n>24||"number"!=typeof o||o>59)return null;m.timezoneHourOffset=n,m.timezoneMinuteOffset=o}return m}function ai(a){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(a))return null;let[b,c]=a.split("T"),[d,e]="-"===b.charAt(0)?[-1,b.substring(1)]:[1,b],[f,g,h]=e.split("-"),i=Number.parseInt(f,10)*d,j=Number.parseInt(g,10)-1,k=Number.parseInt(h,10),[l,m]=ak(c),[n,o]="string"==typeof m?al(m):[0,0],[p,q,r]=l.split(":"),s=Number.parseInt(p,10)+n,t=Number.parseInt(q,10)+o,[u,v]=r.split("."),w=Number.parseInt(u,10),x=v?Number.parseInt(v,10):0,y=new Date(Date.UTC(i,j,k,s,t,w,x));return i>=0&&i<100&&y.setUTCFullYear(y.getUTCFullYear()-1900),y}function aj(a){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(a))return null;let b=a,[c,d]="-"===b.charAt(0)?[-1,b.substring(1)]:[1,b],[e,f,g]=d.split("-"),h=g.length>2?g.substring(0,2):g,i=Number.parseInt(e,10)*c,j=Number.parseInt(f,10)-1,k=Number.parseInt(h,10),l=new Date(Date.UTC(i,j,k,12));return i>=0&&i<100&&l.setUTCFullYear(l.getUTCFullYear()-1900),l}function ak(a){if(a.endsWith("Z"))return[a.substring(0,a.length-1),"Z"];let b=a.split("+"),c=a.split("-");return 1===b.length&&1===c.length?[b[0],void 0]:b.length>c.length?[b[0],`+${b[1]}`]:[c[0],`-${c[1]}`]}function al(a){if("Z"===a)return[0,0];let b="+"===a.charAt(0)?1:-1,[c,d]=a.substring(1).split(":"),e=Number.parseInt(c,10),f=Number.parseInt(d,10);return[e*b,f*b]}function am(a){let b=Number.parseFloat(a);return Number.isNaN(b)?null:b}function an(a){let b=Number.parseInt(a,10);return Number.isNaN(b)?null:b}function ao(a){return a.toLowerCase()}function ap(a){return aq(a)&&"NamedNode"===a.termType}function aq(a){return null!==a&&"object"==typeof a&&"string"==typeof a.termType&&"string"==typeof a.value&&"function"==typeof a.equals}function ar(a){return ap(a)&&aa(a.value)}function as(a){let b=u(a);if("function"!=typeof URL)return!0;try{return new URL(b),!0}catch(c){return!1}}function at(a,b){return av.namedNode(au(ab(a.value),b))}function au(a,b){if("function"!=typeof URL)throw Error("The URL interface is not available, so an IRI cannot be determined.");let c=new URL(b);return c.hash=a,c.href}let av=m.default;function aw(a,b,c={}){var d;if(!["NamedNode","DefaultGraph",].includes(b.graph.termType))throw Error(`Cannot parse Quads with nodes of type [${b.graph.termType}] as their Graph node.`);let e="DefaultGraph"===b.graph.termType?"default":b.graph.value,f=null!==(d=a.graphs[e])&& void 0!==d?d:{};return _(Object.assign(Object.assign({},a),{graphs:_(Object.assign(Object.assign({},a.graphs),{[e]:ax(f,b,c)}))}))}function ax(a,b,c){var d;if(!["NamedNode","BlankNode",].includes(b.subject.termType))throw Error(`Cannot parse Quads with nodes of type [${b.subject.termType}] as their Subject node.`);let e="BlankNode"===b.subject.termType?`_:${b.subject.value}`:b.subject.value,f=null!==(d=a[e])&& void 0!==d?d:{type:"Subject",url:e,predicates:{}};return _(Object.assign(Object.assign({},a),{[e]:ay(f,b,c)}))}function ay(a,b,c){return _(Object.assign(Object.assign({},a),{predicates:az(a.predicates,b,c)}))}function az(a,b,c){var d;if(!["NamedNode",].includes(b.predicate.termType))throw Error(`Cannot parse Quads with nodes of type [${b.predicate.termType}] as their Predicate node.`);let e=b.predicate.value,f=null!==(d=a[e])&& void 0!==d?d:{};return _(Object.assign(Object.assign({},a),{[e]:aA(f,b,c)}))}function aA(a,b,c){var d,e,f,g,h,i,j,k;if("NamedNode"===b.object.termType){let l=_([...null!==(d=a.namedNodes)&& void 0!==d?d:[],b.object.value,]);return _(Object.assign(Object.assign({},a),{namedNodes:l}))}if("Literal"===b.object.termType){if(b.object.datatype.value===af.langString){let m=b.object.language.toLowerCase(),n=_([...null!==(f=null===(e=a.langStrings)|| void 0===e?void 0:e[m])&& void 0!==f?f:[],b.object.value,]),o=_(Object.assign(Object.assign({},null!==(g=a.langStrings)&& void 0!==g?g:{}),{[m]:n}));return _(Object.assign(Object.assign({},a),{langStrings:o}))}let p=_([...null!==(i=null===(h=a.literals)|| void 0===h?void 0:h[b.object.datatype.value])&& void 0!==i?i:[],b.object.value,]),q=_(Object.assign(Object.assign({},null!==(j=a.literals)&& void 0!==j?j:{}),{[b.object.datatype.value]:p}));return _(Object.assign(Object.assign({},a),{literals:q}))}if("BlankNode"===b.object.termType){let r=aB(b.object,c),s=_([...null!==(k=a.blankNodes)&& void 0!==k?k:[],r,]);return _(Object.assign(Object.assign({},a),{blankNodes:s}))}throw Error(`Objects of type [${b.object.termType}] are not supported.`)}function aB(a,b){var c,d;let e=null!==(c=b.chainBlankNodes)&& void 0!==c?c:[];if(void 0===e.find(b=>b.equals(a)))return ae(a);let f=null!==(d=b.otherQuads)&& void 0!==d?d:[],g=f.filter(b=>b.subject.equals(a)),h=g.filter(a=>!aG(a.object)).reduce((a,c)=>{var d;if(!["NamedNode",].includes(c.predicate.termType))throw Error(`Cannot parse Quads with nodes of type [${c.predicate.termType}] as their Predicate node.`);let e=null!==(d=a[c.predicate.value])&& void 0!==d?d:{};return _(Object.assign(Object.assign({},a),{[c.predicate.value]:aA(e,c,b)}))},{}),i=g.filter(a=>aG(a.object));return i.reduce((a,c)=>{var d,e;if(!["NamedNode",].includes(c.predicate.termType))throw Error(`Cannot parse Quads with nodes of type [${c.predicate.termType}] as their Predicate node.`);let f=null!==(d=a[c.predicate.value])&& void 0!==d?d:{},g=null!==(e=f.blankNodes)&& void 0!==e?e:[];return _(Object.assign(Object.assign({},a),{[c.predicate.value]:Object.assign(Object.assign({},f),{blankNodes:[...g,aB(c.object,b),]})}))},h)}function aC(a){let b=a.map(a=>a.subject).filter(aG),c=a.map(a=>a.object).filter(aG),d=[];c.forEach(b=>{d.push(...aF(b,a))});let e=b.concat(c).filter(b=>{var c;if(d.some(a=>a.equals(b)))return!1;let e=a.filter(a=>a.object.equals(b)).map(a=>a.subject);return e.length>0&&(c=e).every(a=>c.every(b=>a.equals(b)))});return e}function aD(a,b={}){var c;let d=[],e=null!==(c=b.dataFactory)&& void 0!==c?c:m.default;return Object.keys(a.graphs).forEach(c=>{let f=a.graphs[c],g="default"===c?e.defaultGraph():e.namedNode(c);Object.keys(f).forEach(a=>{let{predicates:c}=f[a],h=ac(a)?e.blankNode(ad(a)):e.namedNode(a);d.push(...aE(c,h,g,b))})}),d}function aE(a,b,c,d={}){var e;let f=[],g=null!==(e=d.dataFactory)&& void 0!==e?e:m.default;return Object.keys(a).forEach(d=>{var e,h,i,j;let k=g.namedNode(d),l=null!==(e=a[d].langStrings)&& void 0!==e?e:{},m=null!==(h=a[d].namedNodes)&& void 0!==h?h:[],n=null!==(i=a[d].literals)&& void 0!==i?i:{},o=null!==(j=a[d].blankNodes)&& void 0!==j?j:[],p=Object.keys(n);p.forEach(a=>{let d=g.namedNode(a),e=n[a];e.forEach(a=>{let e=g.literal(a,d);f.push(g.quad(b,k,e,c))})});let q=Object.keys(l);q.forEach(a=>{let d=l[a];d.forEach(d=>{let e=g.literal(d,a);f.push(g.quad(b,k,e,c))})}),m.forEach(a=>{let d=g.namedNode(a);f.push(g.quad(b,k,d,c))}),o.forEach(a=>{if(ac(a)){let d=g.blankNode(ad(a));f.push(g.quad(b,k,d,c))}else{let e=g.blankNode(),h=g.quad(b,k,e,c),i=aE(a,e,c);f.push(h),f.push(...i)}})}),f}function aF(a,b,c=[]){if(void 0!==c.find(b=>b.equals(a)))return c;let d=b.filter(b=>b.subject.equals(a)&&aG(b.object)).map(a=>a.object);if(0===d.length)return[];let e=[...c,a],f=d.map(a=>aF(a,b,e)),g=[];for(let h of f)g.push(...h);return g}function aG(a){return"BlankNode"===a.termType}let aH=async a=>{let b=await v(a);return{contextUrl:void 0,documentUrl:a,document:await b.json()}},aI=()=>{let a=[],b=[],c=[];return{onQuad:b=>{a.push(b)},onError:a=>{c.push(a)},onComplete:a=>{b.push(a)},parse:async(d,e)=>{let f=[];try{let g=await o.toRDF(JSON.parse(d),{base:N(e),documentLoader:aH});f=aJ(g)}catch(h){c.forEach(a=>a(h))}f.forEach(b=>{a.forEach(a=>a(b))}),b.forEach(a=>a())}}};function aJ(a){let b=a.map(a=>av.quad(aK(a.subject),aK(a.predicate),aK(a.object),aK(a.graph)));return b}function aK(a){switch(a.termType){case"NamedNode":return av.namedNode(a.value);case"BlankNode":return av.blankNode(a.value.substr(2));case"Literal":return av.literal(a.value,a.language||a.datatype);case"DefaultGraph":return av.defaultGraph();default:throw Error(`unknown termType: ${a.termType}`)}}let aL=()=>{let a=[],b=[],c=[];return{onQuad:b=>{a.push(b)},onError:a=>{c.push(a)},onComplete:a=>{b.push(a)},parse:async(d,e)=>{let f=await aM(N(e));f.parse(d,(d,e)=>{d?c.forEach(a=>a(d)):e?a.forEach(a=>a(e)):b.forEach(a=>a())})}}};async function aM(a){return new h.Parser({format:"text/turtle",baseIRI:a})}async function aN(a){let b=new h.Writer({format:"text/turtle"}),c=a.map(a=>av.quad(a.subject,a.predicate,a.object,void 0));b.addQuads(c);let d=new Promise((a,c)=>{b.end((b,d)=>{b?c(b):a(d)})}),e=await d;return e}function aO(a){var b,c,d,e,f,g,h,i,j;if(ap(a))return`<${a.value}> (URL)`;if(aq(j=a)&&"Literal"===j.termType){if(!ap(a.datatype))return`[${a.value}] (RDF/JS Literal of unknown type)`;let k;switch(a.datatype.value){case af.boolean:return`${null!==(c=null===(b=ag(a.value))|| void 0===b?void 0:b.valueOf())&& void 0!==c?c:`Invalid data: \`${a.value}\``} (boolean)`;case af.dateTime:return`${null!==(e=null===(d=ai(a.value))|| void 0===d?void 0:d.toUTCString())&& void 0!==e?e:`Invalid data: \`${a.value}\``} (datetime)`;case af.decimal:return`${null!==(g=null===(f=am(a.value))|| void 0===f?void 0:f.toString())&& void 0!==g?g:`Invalid data: \`${a.value}\``} (decimal)`;case af.integer:return`${null!==(i=null===(h=an(a.value))|| void 0===h?void 0:h.toString())&& void 0!==i?i:`Invalid data: \`${a.value}\``} (integer)`;case af.langString:return`"${a.value}" (${a.language} string)`;case af.string:return`"${a.value}" (string)`;default:return`[${a.value}] (RDF/JS Literal of type: \`${a.datatype.value}\`)`}}return"BlankNode"===a.termType?`[${a.value}] (RDF/JS BlankNode)`:"Quad"===a.termType?"??? (nested RDF* Quad)":"Variable"===a.termType?`?${a.value} (RDF/JS Variable)`:a}function aP(a){if(!ba(a))throw new bf(a)}function aQ(a,b){let c=s(a)?a.internal_changeLog:{additions:[],deletions:[]},[d,e]=b.filter(a=>!aR(a)).reduce(([a,b],c)=>{let d=a.find(a=>a.equals(c));return void 0!==d?[a.filter(a=>!a.equals(c)),b,]:[a,b.concat(c)]},[c.additions,c.deletions]);return _(Object.assign(Object.assign({},a),{internal_changeLog:{additions:d,deletions:e}}))}function aR(a){return"BlankNode"===a.subject.termType||"BlankNode"===a.object.termType}function aS(a,b){var c,d,e;if(aP(a),!as(b))throw new bg(b);let f=u(b),g=null!==(e=null===(d=null===(c=a.predicates[f])|| void 0===c?void 0:c.namedNodes)|| void 0===d?void 0:d[0])&& void 0!==e?e:null;return null===g?null:aa(g)?`#${ab(g)}`:g}let aT=aS;function aU(a,b){var c,d,e;if(aP(a),!as(b))throw new bg(b);let f=u(b);return null!==(e=null===(d=null===(c=a.predicates[f])|| void 0===c?void 0:c.namedNodes)|| void 0===d?void 0:d.map(a=>aa(a)?`#${ab(a)}`:a))&& void 0!==e?e:[]}let aV=aU;function aW(a,b,c){var d,e;if(aP(a),!as(b))throw new bg(b);let f=u(b),g=null!==(e=null===(d=a.predicates[f])|| void 0===d?void 0:d.langStrings)&& void 0!==e?e:{},h=Object.keys(g),i=h.find(a=>a.toLowerCase()===c.toLowerCase()&&Array.isArray(g[a])&&g[a].length>0);return"string"==typeof i?g[i][0]:null}function aX(a,b,c){var d,e;if(aP(a),!as(b))throw new bg(b);let f=u(b),g=null!==(e=null===(d=a.predicates[f])|| void 0===d?void 0:d.langStrings)&& void 0!==e?e:{},h=Object.keys(g),i=h.find(a=>a.toLowerCase()===c.toLowerCase()&&Array.isArray(g[a])&&g[a].length>0);return"string"==typeof i?[...g[i]]:[]}function aY(a,b){aP(a);let c=a4(a,b,af.string);return c}function aZ(a,b){let c=aT(a,b);return null===c?null:av.namedNode(c)}function a$(a,b){let c=aV(a,b);return c.map(a=>av.namedNode(a))}function a_(a,b){var c,d,e,f;if(aP(a),!as(b))throw new bg(b);let g=u(b),h=null!==(d=null===(c=a.predicates[g])|| void 0===c?void 0:c.langStrings)&& void 0!==d?d:{},i=Object.keys(h);if(i.length>0){let j=i.find(a=>Array.isArray(h[a])&&h[a].length>0);if("string"==typeof j)return av.literal(h[j][0],j)}let k=null!==(f=null===(e=a.predicates[g])|| void 0===e?void 0:e.literals)&& void 0!==f?f:{},l=Object.keys(k);if(l.length>0){let m=l.find(a=>Array.isArray(k[a])&&k[a].length>0);if("string"==typeof m)return av.literal(k[m][0],av.namedNode(m))}return null}function a0(a,b){var c,d,e,f;if(aP(a),!as(b))throw new bg(b);let g=u(b),h=[],i=null!==(d=null===(c=a.predicates[g])|| void 0===c?void 0:c.langStrings)&& void 0!==d?d:{},j=Object.keys(i);for(let k of j){let l=i[k],m=l.map(a=>av.literal(a,k));h=h.concat(m)}let n=null!==(f=null===(e=a.predicates[g])|| void 0===e?void 0:e.literals)&& void 0!==f?f:{},o=Object.keys(n);for(let p of o){let q=n[p],r=av.namedNode(p),s=q.map(a=>av.literal(a,r));h=h.concat(s)}return h}function a1(a,b){var c,d;aP(a);let e=aZ(a,b);if(null!==e)return e;let f=a_(a,b);if(null!==f)return f;let g=u(b),h=null!==(d=null===(c=a.predicates[g])|| void 0===c?void 0:c.blankNodes)&& void 0!==d?d:[];if(h.length>0){let i=ac(h[0])?ad(h[0]):void 0;return av.blankNode(i)}return null}function a2(a,b){var c,d;aP(a);let e=a$(a,b),f=a0(a,b),g=u(b),h=null!==(d=null===(c=a.predicates[g])|| void 0===c?void 0:c.blankNodes)&& void 0!==d?d:[],i=h.map(a=>{let b=ac(a)?ad(a):void 0;return av.blankNode(b)}),j=e.concat(f).concat(i);return j}function a3(a,b,c){var d,e,f,g;if(!as(b))throw new bg(b);let h=u(b);return null!==(g=null===(f=null===(e=null===(d=a.predicates[h])|| void 0===d?void 0:d.literals)|| void 0===e?void 0:e[c])|| void 0===f?void 0:f[0])&& void 0!==g?g:null}function a4(a,b,c){var d,e,f;if(!as(b))throw new bg(b);let g=u(b),h=null!==(f=null===(e=null===(d=a.predicates[g])|| void 0===d?void 0:d.literals)|| void 0===e?void 0:e[c])&& void 0!==f?f:[];return[...h]}function a5(a,b,c={}){var d;if(!as(b))throw new bi(b);let e=void 0!==c.scope?u(c.scope):"default",f=null!==(d=a.graphs[e])&& void 0!==d?d:{},g=u(b),h=aa(g)&&r(a)?au(ab(g),N(a)):g,i=f[h];return void 0===i?null:i}function a6(a,b={acceptBlankNodes:!1}){var c;let d=void 0!==b.scope?u(b.scope):"default",e=null!==(c=a.graphs[d])&& void 0!==c?c:{};return Object.values(e).filter(a=>!ac(a.url)||b.acceptBlankNodes)}function a7(a,b){var c;let d=be(b)&&r(a)?au(ab(b.url),N(a)):b.url,e=a.graphs.default,f=_(Object.assign(Object.assign({},e),{[d]:_(Object.assign(Object.assign({},b),{url:d}))})),g=_(Object.assign(Object.assign({},a.graphs),{default:f})),h=av.namedNode(d),i=null===(c=a.graphs.default[d])|| void 0===c?void 0:c.predicates,j=void 0!==i?aE(i,h,av.defaultGraph()):[],k=aE(b.predicates,h,av.defaultGraph());return function(a,b){let c=s(a)?a.internal_changeLog:{additions:[],deletions:[]},[d,e]=b.filter(a=>!aR(a)).reduce(([a,b],c)=>{let d=b.find(a=>a.equals(c));return void 0!==d?[a,b.filter(a=>!a.equals(c)),]:[a.concat(c),b]},[c.additions,c.deletions]);return _(Object.assign(Object.assign({},a),{internal_changeLog:{additions:d,deletions:e}}))}(aQ(_(Object.assign(Object.assign({},a),{graphs:g})),j),k)}function a8(a,b){var c;let d;d=ap(b)?b.value:"string"==typeof b?aa(b)&&r(a)?au(ab(b),N(a)):b:be(b)?b.url:bc(b);let e=a.graphs.default,f=Object.assign({},e);delete f[d];let g=_(Object.assign(Object.assign({},a.graphs),{default:_(f)})),h=av.namedNode(d),i=null===(c=a.graphs.default[d])|| void 0===c?void 0:c.predicates,j=void 0!==i?aE(i,h,av.defaultGraph()):[];return aQ(_(Object.assign(Object.assign({},a),{graphs:g})),j)}function a9(a={}){var b,c;if(void 0!==a.url){let{url:d}=a;if(!as(d))throw new bi(d);let e=_({type:"Subject",predicates:_({}),url:d});return e}let f=null!==(b=a.name)&& void 0!==b?b:bj(),g=`${$}${c=f}`,h=_({type:"Subject",predicates:_({}),url:g});return h}function ba(a){return"object"==typeof a&&null!==a&&"string"==typeof a.type&&"Subject"===a.type}function bb(a,b){if(be(a)){if(void 0===b)throw Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return au(ab(a.url),b)}return a.url}let bc=bb;function bd(a){let b="";be(a)?b+=`## Thing (no URL yet — identifier: \`#${ab(a.url)}\`)
`:b+=`## Thing: ${a.url}
`;let c=Object.keys(a.predicates);if(0===c.length)b+="\n<empty>\n";else for(let d of c){b+=`
Property: ${d}
`;let e=a2(a,d);b+=e.reduce((a,b)=>`${a}- ${aO(b)}
`,"")}return b}function be(a){return aa(a.url)}class bf extends t{constructor(a){let b=`Expected a Thing, but received: [${a}].`;super(b),this.receivedValue=a}}class bg extends t{constructor(a){let b=ap(a)?a.value:a,c=`Expected a valid URL to identify a property, but received: [${b}].`;super(c),this.receivedProperty=b}}class bh extends t{constructor(a){let b=ap(a)?a.value:a,c=`Expected a valid URL value, but received: [${b}].`;super(c),this.receivedValue=b}}class bi extends t{constructor(a){let b=ap(a)?a.value:a,c=`Expected a valid URL to identify a Thing, but received: [${b}].`;super(c),this.receivedValue=b}}let bj=()=>Date.now().toString()+Math.random().toString().substring(2);function bk(a){let b=new URL(a);return b.hash="",b.href}function bl(){return _({type:"Dataset",graphs:{default:{}}})}async function bm(a,b={}){if(z(a))throw new R(`Fetching the SolidDataset at [${a.url}] failed: [${a.status}] [${a.statusText}].`,a);let c=K(a),d=Object.assign({"text/turtle":aL()},b.parsers),e=M(c);if(null===e)throw Error(`Could not determine the content type of the Resource at [${N(c)}].`);let f=e.split(";")[0],g=d[f];if(void 0===g)throw Error(`The Resource at [${N(c)}] has a MIME type of [${f}], but the only parsers available are for the following MIME types: [${Object.keys(d).join(", ")}].`);let h=await a.text(),i=new Promise((a,b)=>{let d=_({graphs:_({default:_({})}),type:"Dataset"}),f=[],i=[];g.onError(a=>{b(Error(`Encountered an error parsing the Resource at [${N(c)}] with content type [${e}]: ${a}`))}),g.onQuad(a=>{i.push(a),"BlankNode"===a.subject.termType||"BlankNode"===a.object.termType?f.push(a):d=aw(d,a)}),g.onComplete(async()=>{let b=f.length<=20?aC(f):[],e=f.filter(a=>b.every(b=>!b.equals(a.subject)));d=e.reduce((a,c)=>aw(a,c,{otherQuads:i,chainBlankNodes:b}),d);let g=_(Object.assign(Object.assign({},d),c));a(g)}),g.parse(h,c)});return i}async function bn(a,b=I){var c;a=u(a);let d=Object.assign(Object.assign({},I),b),e=Object.keys(null!==(c=b.parsers)&& void 0!==c?c:{}),f=e.length>0?e.join(", "):"text/turtle",g=await d.fetch(a,{headers:{Accept:f}});if(z(g))throw new R(`Fetching the Resource at [${a}] failed: [${g.status}] [${g.statusText}].`,g);let h=await bm(g,b);return h}async function bo(a){let b=a.internal_changeLog.deletions.length>0?`DELETE DATA {${(await aN(a.internal_changeLog.deletions.map(bB))).trim()}};`:"",c=a.internal_changeLog.additions.length>0?`INSERT DATA {${(await aN(a.internal_changeLog.additions.map(bB))).trim()}};`:"";return{method:"PATCH",body:`${b} ${c}`,headers:{"Content-Type":"application/sparql-update"}}}async function bp(a){return{method:"PUT",body:await aN(aD(a).map(bB)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${C.Resource}>; rel="type"`}}}async function bq(a,b,c=I){a=u(a);let d=Object.assign(Object.assign({},I),c),e=function(a){let b=s(a)?a:_(Object.assign(Object.assign({},a),{internal_changeLog:{additions:[],deletions:[]}}));return b}(b),f=bt(e,a)?await bo(e):await bp(e),g=await d.fetch(a,f);if(z(g)){let h=bt(e,a)?`The changes that were sent to the Pod are listed below.

${by(e)}`:`The SolidDataset that was sent to the Pod is listed below.

${bx(e)}`;throw new R(`Storing the Resource at [${a}] failed: [${g.status}] [${g.statusText}].

${h}`,g)}let i=Object.assign(Object.assign({},w(g)),{isRawData:!1}),j=_(Object.assign(Object.assign({},b),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:i})),k=bD(j);return k}async function br(a,b=I){let c=Object.assign(Object.assign({},I),b),d=q(a)?u(N(a)):u(a),e=await c.fetch(d,{method:"DELETE"});if(z(e))throw new R(`Deleting the SolidDataset at [${d}] failed: [${e.status}] [${e.statusText}].`,e)}async function bs(a,b=I){var c;a=(a=u(a)).endsWith("/")?a:`${a}/`;let d=Object.assign(Object.assign({},I),b),e=await d.fetch(a,{method:"PUT",body:d.initialContent?await aN(aD(d.initialContent).map(bB)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${C.BasicContainer}>; rel="type"`}});if(z(e)){let f=void 0===d.initialContent?"empty":"non-empty";throw new R(`Creating the ${f} Container at [${a}] failed: [${e.status}] [${e.statusText}].`,e)}let g=w(e),h=_(Object.assign(Object.assign({},null!==(c=b.initialContent)&& void 0!==c?c:bl()),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:g}));return h}function bt(a,b){var c,d;return s(a)&&q(a)&&"string"==typeof a.internal_resourceInfo.sourceIri&&(c=a,d=b,bk(c.internal_resourceInfo.sourceIri)===bk(d))}async function bu(a,b,c=I){let d=Object.assign(Object.assign({},I),c);a=u(a);let e=await aN(aD(b).map(bB)),f={"Content-Type":"text/turtle",Link:`<${C.Resource}>; rel="type"`};c.slugSuggestion&&(f.slug=c.slugSuggestion);let g=await d.fetch(a,{method:"POST",body:e,headers:f});if(z(g))throw new R(`Storing the Resource in the Container at [${a}] failed: [${g.status}] [${g.statusText}].

The SolidDataset that was sent to the Pod is listed below.

${bx(b)}`,g);let h=w(g);if(!h.location)throw Error("Could not determine the location of the newly saved SolidDataset.");let i;try{i=new URL(h.location).href}catch(j){i=new URL(h.location,g.url).href}let k={internal_resourceInfo:{isRawData:!1,sourceIri:i}},l=_(Object.assign(Object.assign({},b),k)),m=bD(l);return m}async function bv(a,b=I){a=u(a);let c=Object.assign(Object.assign({},I),b),d={"Content-Type":"text/turtle",Link:`<${C.BasicContainer}>; rel="type"`};b.slugSuggestion&&(d.slug=b.slugSuggestion);let e=await c.fetch(a,{method:"POST",headers:d});if(z(e))throw new R(`Creating an empty Container in the Container at [${a}] failed: [${e.status}] [${e.statusText}].`,e);let f=w(e);if(!f.location)throw Error("Could not determine the location of the newly created Container.");try{let g=new URL(f.location).toString();return _(Object.assign(Object.assign({},bl()),{internal_resourceInfo:Object.assign(Object.assign({},f),{sourceIri:g})}))}catch(h){}return _(Object.assign(Object.assign({},bl()),{internal_resourceInfo:Object.assign(Object.assign({},f),{sourceIri:new URL(f.location,e.url).href})}))}async function bw(a,b=I){let c=q(a)?u(N(a)):u(a);if(!L(a))throw Error(`You're trying to delete the Container at [${c}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);let d=Object.assign(Object.assign({},I),b),e=await d.fetch(c,{method:"DELETE"});if(z(e))throw new R(`Deleting the Container at [${c}] failed: [${e.status}] [${e.statusText}].`,e)}function bx(a){let b="";q(a)?b+=`# SolidDataset: ${N(a)}
`:b+=`# SolidDataset (no URL yet)
`;let c=a6(a);return 0===c.length?b+="\n<empty>\n":c.forEach(c=>{b+=`
${bd(c)}`,s(a)&&(b+=`
${bA(a,c)}
`)}),b}function by(a){if(!q(a))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!s(a)||0===a.internal_changeLog.additions.length&&0===a.internal_changeLog.deletions.length)return`## Changes compared to ${N(a)}

This SolidDataset has not been modified since it was fetched from ${N(a)}.
`;let b=`## Changes compared to ${N(a)}
`,c=bz(a);return Object.keys(c).forEach(a=>{b+=`
### Thing: ${a}
`;let d=c[a];Object.keys(d).forEach(a=>{b+=`
Property: ${a}
`;let{deleted:c}=d[a],{added:e}=d[a];c.length>0&&(b+="- Removed:\n",b+=c.reduce((a,b)=>`${a}  - ${aO(b)}
`,"")),e.length>0&&(b+="- Added:\n",b+=e.reduce((a,b)=>`${a}  - ${aO(b)}
`,""))})}),b}function bz(a){let b={};return a.internal_changeLog.deletions.forEach(c=>{var d,e,f;let g=ar(c.subject)?at(c.subject,N(a)):c.subject;if(!ap(g)||!ap(c.predicate))return;let h=u(g),i=u(c.predicate);null!==(d=b[h])&& void 0!==d||(b[h]={}),null!==(e=(f=b[h])[i])&& void 0!==e||(f[i]={added:[],deleted:[]}),b[h][i].deleted.push(c.object)}),a.internal_changeLog.additions.forEach(c=>{var d,e,f;let g=ar(c.subject)?at(c.subject,N(a)):c.subject;if(!ap(g)||!ap(c.predicate))return;let h=u(g),i=u(c.predicate);null!==(d=b[h])&& void 0!==d||(b[h]={}),null!==(e=(f=b[h])[i])&& void 0!==e||(f[i]={added:[],deleted:[]}),b[h][i].added.push(c.object)}),b}function bA(a,b){let c=av.namedNode(b.url),d=a.internal_changeLog.additions.reduce((a,b)=>b.subject.equals(c)?a+1:a,0),e=a.internal_changeLog.deletions.reduce((a,b)=>b.subject.equals(c)?a+1:a,0),f=1===d?"1 new value added":`${d} new values added`,g=1===e?"1 value removed":`${e} values removed`;return`(${f} / ${g})`}function bB(a){let b=ap(a.subject)?bC(a.subject):a.subject,c=ap(a.object)?bC(a.object):a.object;return av.quad(b,a.predicate,c,a.graph)}function bC(a){return aa(a.value)?av.namedNode(`#${ab(a.value)}`):a}function bD(a){let b=N(a),c=a.graphs.default,d=Object.keys(c),e=d.reduce((a,c)=>{let d=bE(a[c],b),e=aa(c)?`${b}#${ab(c)}`:c,f=Object.assign({},a);return delete f[c],f[e]=d,_(f)},c),f=_(Object.assign(Object.assign({},a.graphs),{default:e}));return _(Object.assign(Object.assign({},a),{graphs:f}))}function bE(a,b){let c=Object.keys(a.predicates),d=c.reduce((a,c)=>{var d;let e=null!==(d=a[c].namedNodes)&& void 0!==d?d:[];if(e.every(a=>!aa(a)))return a;let f=_(e.map(a=>aa(a)?`${b}#${ab(a)}`:a)),g=_(Object.assign(Object.assign({},a[c]),{namedNodes:f}));return _(Object.assign(Object.assign({},a),{[c]:g}))},a.predicates);return _(Object.assign(Object.assign({},a),{predicates:d,url:aa(a.url)?`${b}#${ab(a.url)}`:a.url}))}async function bF(a,b=I){let c=u(a);try{let d=new URL("/.well-known/solid",new URL(c).origin).href;return await bn(d,{fetch:b.fetch})}catch(e){}let f=await J(c,{fetch:b.fetch,ignoreAuthenticationErrors:!0}),g=Q(f),h=g[H.storage],i=(null==h?void 0:h.length)===1?h[0]:null;if(null!==i){let j=new URL(".well-known/solid",i.endsWith("/")?i:`${i}/`).href;return bn(j,Object.assign(Object.assign({},b),{parsers:{"application/ld+json":aI()}}))}throw Error("Could not determine storage root or well-known solid resource.")}let{Response:bG}=p;function bH(a){let b=bl(),c=Object.assign(Object.assign({},b),{internal_resourceInfo:{sourceIri:u(a),isRawData:!1,contentType:"text/turtle",linkedResources:{}}});return c}function bI(a){let b=u(a);if(!b.endsWith("/"))throw Error("A Container's URL should end in a slash. Please update your tests.");return bH(b)}let bJ=(a,b,c)=>{var d,e;if(aP(a),!as(b))throw new bg(b);if(!ba(c)&&!as(c))throw new bh(c);let f=u(b),g=null!==(d=a.predicates[f])&& void 0!==d?d:{},h=null!==(e=g.namedNodes)&& void 0!==e?e:[],i;i=ap(c)?c.value:"string"==typeof c?c:be(c)?c.url:bc(c);let j=_(h.concat(u(i))),k=_(Object.assign(Object.assign({},g),{namedNodes:j})),l=_(Object.assign(Object.assign({},a.predicates),{[f]:k})),m=_(Object.assign(Object.assign({},a),{predicates:l}));return m},bK=bJ,bL=(a,b,c)=>{var d;return aP(a),bW(a,b,(d=c)?"true":"false",af.boolean)},bM=(a,b,c)=>{var d;return aP(a),bW(a,b,(d=c).toISOString(),af.dateTime)},bN=(a,b,c)=>(aP(a),bW(a,b,function(a){let b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),[e,f]=ak(a.toISOString());return`${b}-${String(c).padStart(2,"0")}-${String(d).padStart(2,"0")}${f}`}(c),af.date)),bO=(a,b,c)=>(aP(a),bW(a,b,function(a){let b,c;if(a.millisecond&&(b=a.millisecond<10?`00${a.millisecond}`:a.millisecond<100?`0${a.millisecond}`:a.millisecond),"number"==typeof a.timezoneHourOffset){let d=10>Math.abs(a.timezoneHourOffset)?`0${Math.abs(a.timezoneHourOffset)}`:Math.abs(a.timezoneHourOffset);c=a.timezoneHourOffset>=0?`+${d}`:`-${d}`,a.timezoneMinuteOffset?c=`${c}:${a.timezoneMinuteOffset<10?`0${a.timezoneMinuteOffset}`:a.timezoneMinuteOffset}`:c+=":00"}return`${a.hour<10?`0${a.hour}`:a.hour}:${a.minute<10?`0${a.minute}`:a.minute}:${a.second<10?`0${a.second}`:a.second}${a.millisecond?`.${b}`:""}${c||""}`}(c),af.time)),bP=(a,b,c)=>{var d;return aP(a),bW(a,b,(d=c).toString(),af.decimal)},bQ=(a,b,c)=>{var d;return aP(a),bW(a,b,(d=c).toString(),af.integer)};function bR(a,b,c,d){var e,f,g;if(aP(a),!as(b))throw new bg(b);let h=u(b),i=ao(d),j=null!==(e=a.predicates[h])&& void 0!==e?e:{},k=null!==(f=j.langStrings)&& void 0!==f?f:{},l=null!==(g=k[i])&& void 0!==g?g:[],m=_(l.concat(c)),n=_(Object.assign(Object.assign({},k),{[i]:m})),o=_(Object.assign(Object.assign({},j),{langStrings:n})),p=_(Object.assign(Object.assign({},a.predicates),{[h]:o})),q=_(Object.assign(Object.assign({},a),{predicates:p}));return q}let bS=(a,b,c)=>(aP(a),bW(a,b,c,af.string));function bT(a,b,c){return bJ(a,b,c.value)}function bU(a,b,c){if(aP(a),!as(b))throw new bg(b);let d=c.datatype.value;return d===af.langString?bR(a,b,c.value,c.language):bW(a,b,c.value,c.datatype.value)}function bV(a,b,c){var d,e;if("NamedNode"===c.termType)return bT(a,b,c);if("Literal"===c.termType)return bU(a,b,c);if("BlankNode"===c.termType){if(aP(a),!as(b))throw new bg(b);let f=u(b),g=null!==(d=a.predicates[f])&& void 0!==d?d:{},h=null!==(e=g.blankNodes)&& void 0!==e?e:[],i=_(h.concat(ae(c))),j=_(Object.assign(Object.assign({},g),{blankNodes:i})),k=_(Object.assign(Object.assign({},a.predicates),{[f]:j})),l=_(Object.assign(Object.assign({},a),{predicates:k}));return l}throw Error(`Term type [${c.termType}] is not supported by @inrupt/solid-client.`)}function bW(a,b,c,d){var e,f,g;if(aP(a),!as(b))throw new bg(b);let h=u(b),i=null!==(e=a.predicates[h])&& void 0!==e?e:{},j=null!==(f=i.literals)&& void 0!==f?f:{},k=null!==(g=j[d])&& void 0!==g?g:[],l=_(k.concat(c)),m=_(Object.assign(Object.assign({},j),{[d]:l})),n=_(Object.assign(Object.assign({},i),{literals:m})),o=_(Object.assign(Object.assign({},a.predicates),{[h]:n})),p=_(Object.assign(Object.assign({},a),{predicates:o}));return p}function bX(a,b){if(aP(a),!as(b))throw new bg(b);let c=u(b),d=Object.assign({},a.predicates);return delete d[c],_(Object.assign(Object.assign({},a),{predicates:_(d)}))}let bY=(a,b,c)=>{var d,e,f;if(aP(a),!as(b))throw new bg(b);let g=u(b);if(!ba(c)&&!as(c))throw new bh(c);let h=ba(c)?bc(c):u(c),i=_(null!==(f=null===(e=null===(d=a.predicates[g])|| void 0===d?void 0:d.namedNodes)|| void 0===e?void 0:e.filter(a=>a.toLowerCase()!==h.toLowerCase()))&& void 0!==f?f:[]),j=_(Object.assign(Object.assign({},a.predicates[g]),{namedNodes:i})),k=_(Object.assign(Object.assign({},a.predicates),{[g]:j}));return _(Object.assign(Object.assign({},a),{predicates:k}))},bZ=bY,b$=(a,b,c)=>(aP(a),b8(a,b,af.boolean,a=>ag(a)===c)),b_=(a,b,c)=>(aP(a),b8(a,b,af.dateTime,a=>{var b;return(null===(b=ai(a))|| void 0===b?void 0:b.getTime())===c.getTime()})),b0=(a,b,c)=>(aP(a),b8(a,b,af.date,function(a){let b=aj(a);return!!b&&b.getFullYear()===c.getFullYear()&&b.getMonth()===c.getMonth()&&b.getDate()===c.getDate()})),b1=(a,b,c)=>(aP(a),b8(a,b,af.time,function(a){let b=ah(a);return!!b&&b.hour===c.hour&&b.minute===c.minute&&b.second===c.second&&b.millisecond===c.millisecond&&b.timezoneHourOffset===c.timezoneHourOffset&&b.timezoneMinuteOffset===c.timezoneMinuteOffset})),b2=(a,b,c)=>(aP(a),b8(a,b,af.decimal,a=>am(a)===c)),b3=(a,b,c)=>(aP(a),b8(a,b,af.integer,a=>an(a)===c));function b4(a,b,c,d){var e,f;if(aP(a),!as(b))throw new bg(b);let g=u(b),h=null!==(f=null===(e=a.predicates[g])|| void 0===e?void 0:e.langStrings)&& void 0!==f?f:{},i=Object.keys(h).find(a=>ao(a)===ao(d)&&Array.isArray(h[a])&&h[a].length>0);if("string"!=typeof i)return a;let j=h[i],k=_(j.filter(a=>a!==c)),l=_(Object.assign(Object.assign({},h),{[i]:k})),m=_(Object.assign(Object.assign({},a.predicates[g]),{langStrings:l})),n=_(Object.assign(Object.assign({},a.predicates),{[g]:m}));return _(Object.assign(Object.assign({},a),{predicates:n}))}let b5=(a,b,c)=>(aP(a),b8(a,b,af.string,a=>a===c));function b6(a,b,c){return bY(a,b,c.value)}function b7(a,b,c){var d,e,f;if(aP(a),!as(b))throw new bg(b);let g=c.datatype.value;if(g===af.langString)return b4(a,b,c.value,c.language);let h=u(b),i=null!==(d=a.predicates[h])&& void 0!==d?d:{},j=null!==(e=i.literals)&& void 0!==e?e:{},k=null!==(f=j[g])&& void 0!==f?f:[],l=_(k.filter(a=>a!==c.value)),m=_(Object.assign(Object.assign({},j),{[g]:l})),n=_(Object.assign(Object.assign({},i),{literals:m})),o=_(Object.assign(Object.assign({},a.predicates),{[h]:n})),p=_(Object.assign(Object.assign({},a),{predicates:o}));return p}function b8(a,b,c,d){var e,f,g;if(!as(b))throw new bg(b);let h=u(b),i=null!==(e=a.predicates[h])&& void 0!==e?e:{},j=null!==(f=i.literals)&& void 0!==f?f:{},k=null!==(g=j[c])&& void 0!==g?g:[],l=_(k.filter(a=>!d(a))),m=_(Object.assign(Object.assign({},j),{[c]:l})),n=_(Object.assign(Object.assign({},i),{literals:m})),o=_(Object.assign(Object.assign({},a.predicates),{[h]:n})),p=_(Object.assign(Object.assign({},a),{predicates:o}));return p}let b9=(a,b,c)=>{if(aP(a),!as(b))throw new bg(b);if(!ba(c)&&!as(c))throw new bh(c);return bJ(bX(a,b),b,c)},ca=b9,cb=(a,b,c)=>(aP(a),bL(bX(a,b),b,c)),cc=(a,b,c)=>(aP(a),bM(bX(a,b),b,c)),cd=(a,b,c)=>(aP(a),bN(bX(a,b),b,c)),ce=(a,b,c)=>(aP(a),bO(bX(a,b),b,c)),cf=(a,b,c)=>(aP(a),bP(bX(a,b),b,c)),cg=(a,b,c)=>(aP(a),bQ(bX(a,b),b,c));function ch(a,b,c,d){return aP(a),bR(bX(a,b),b,c,d)}let ci=(a,b,c)=>(aP(a),bS(bX(a,b),b,c));function cj(a,b,c){return aP(a),bT(bX(a,b),b,c)}function ck(a,b,c){return aP(a),bU(bX(a,b),b,c)}function cl(a,b,c){if(aP(a),!as(b))throw new bg(b);return bV(bX(a,b),b,c)}function cm(a=a9()){let b=ba(a)?a:a9(a);function c(a){return(c,d)=>(b=a(b,c,d),f)}function d(a){return(c,d)=>(b=a(b,c,d),f)}function e(a){return(c,d)=>(b=a(b,c,d),f)}let f={build:()=>b,addUrl:c(bJ),addIri:c(bK),addBoolean:c(bL),addDatetime:c(bM),addDate:c(bN),addTime:c(bO),addDecimal:c(bP),addInteger:c(bQ),addStringNoLocale:c(bS),addStringEnglish:(a,c)=>(b=bR(b,a,c,"en"),f),addStringWithLocale:(a,c,d)=>(b=bR(b,a,c,d),f),addNamedNode:c(bT),addLiteral:c(bU),addTerm:c(bV),setUrl:d(b9),setIri:d(ca),setBoolean:d(cb),setDatetime:d(cc),setDate:d(cd),setTime:d(ce),setDecimal:d(cf),setInteger:d(cg),setStringNoLocale:d(ci),setStringEnglish:(a,c)=>(b=ch(b,a,c,"en"),f),setStringWithLocale:(a,c,d)=>(b=ch(b,a,c,d),f),setNamedNode:d(cj),setLiteral:d(ck),setTerm:d(cl),removeAll:a=>(b=bX(b,a),f),removeUrl:e(bY),removeIri:e(bZ),removeBoolean:e(b$),removeDatetime:e(b_),removeDate:e(b0),removeTime:e(b1),removeDecimal:e(b2),removeInteger:e(b3),removeStringNoLocale:e(b5),removeStringEnglish:(a,c)=>cm(b4(b,a,c,"en")),removeStringWithLocale:(a,c,d)=>cm(b4(b,a,c,d)),removeNamedNode:e(b6),removeLiteral:e(b7)};return f}function cn(a){let b=Q(a).type;return Array.isArray(b)&&b.includes(E.AccessControlResource)}async function co(a,b=I){if(!cW(a))return{resourceAcl:null,fallbackAcl:null};try{let c=await cp(a,b),d=null===c?{resourceAcl:null,fallbackAcl:await cq(a,b)}:{resourceAcl:c,fallbackAcl:null};return d}catch(e){if(e instanceof cK)return{resourceAcl:null,fallbackAcl:null};throw e}}async function cp(a,b=I){if(!cW(a))return null;try{let c=await bn(a.internal_resourceInfo.aclUrl,b);if(cn(c))throw new cK(a,c);return _(Object.assign(Object.assign({},c),{internal_accessTo:N(a)}))}catch(d){if(d instanceof cK)throw d;return null}}async function cq(a,b=I){let c=new URL(N(a)),d=c.pathname;if("/"===d)return null;let e=cr(d),f=new URL(e,c.origin).href,g=await J(f,b);if(!cW(g))return null;let h=await cp(g,b);return null===h?cq(g,b):h}function cr(a){let b="/"===a.substring(a.length-1)?a.substring(0,a.length-1):a,c=`${a.substring(0,b.lastIndexOf("/"))}/`;return c}function cs(a){let b=a6(a);return b.filter(ct)}function ct(a){return aV(a,B.type).includes(A.Authorization)}function cu(a,b){return a.filter(a=>cv(a,b))}function cv(a,b){return aV(a,A.accessTo).includes(b)}function cw(a,b){return a.filter(a=>cx(a,b))}function cx(a,b){return aV(a,A.default).includes(b)||aV(a,A.defaultForNew).includes(b)}function cy(a){let b=aV(a,A.mode),c=b.includes(cC.write);return c?{read:b.includes(cC.read),append:!0,write:!0,control:b.includes(cC.control)}:{read:b.includes(cC.read),append:b.includes(cC.append),write:!1,control:b.includes(cC.control)}}function cz(a){return a.reduce((a,b)=>{let c=a.write||b.write;return c?{read:a.read||b.read,append:!0,write:!0,control:a.control||b.control}:{read:a.read||b.read,append:a.append||b.append,write:!1,control:a.control||b.control}},{read:!1,append:!1,write:!1,control:!1})}function cA(a){return!aE(a.predicates,av.namedNode(a.url),av.defaultGraph()).some(a=>!cB(a))&&(null===aT(a,A.accessTo)&&null===aT(a,A.default)&&null===aT(a,A.defaultForNew)||null===aT(a,A.mode)||null===aT(a,A.agent)&&null===aT(a,A.agentGroup)&&null===aT(a,A.agentClass))}function cB(a){let{predicate:b}=a,{object:c}=a;return!!(b.equals(av.namedNode(B.type))&&c.equals(av.namedNode(A.Authorization))||b.equals(av.namedNode(A.accessTo))||b.equals(av.namedNode(A.default))||b.equals(av.namedNode(A.defaultForNew))||b.equals(av.namedNode(A.mode))&&Object.values(cC).some(a=>c.equals(av.namedNode(a)))||b.equals(av.namedNode(A.agent))||b.equals(av.namedNode(A.agentGroup))||b.equals(av.namedNode(A.agentClass))||b.equals(av.namedNode(A.origin)))}let cC={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function cD(a,b,c){return a.filter(a=>aV(a,c).includes(b))}function cE(a,b){let c={};return a.forEach(a=>{let d=aV(a,b),e=cy(a);d.forEach(a=>{c[a]=void 0===c[a]?e:cz([c[a],e])})}),c}function cF(a){let b=a9();return b=ca(b,B.type,A.Authorization),a.read&&(b=bK(b,A.mode,cC.read)),a.append&&!a.write&&(b=bK(b,A.mode,cC.append)),a.write&&(b=bK(b,A.mode,cC.write)),a.control&&(b=bK(b,A.mode,cC.control)),b}function cG(a,b){return Object.assign(y(a),{internal_acl:b})}let cH=[A.agent,A.agentClass,A.agentGroup,A.origin,];function cI(a,b,c,d,e){let f=a;a6(a).forEach(b=>{let[g,h]=function(a,b,c,d,e){if(!aV(a,c).includes(b)){let f=cF({read:!1,append:!1,write:!1,control:!1});return[a,f]}let g=bZ(a,c,b),h=function(a){let b=a9();function c(a,b,c){return aV(a,c).reduce((a,b)=>bK(a,c,b),b)}return b=ca(b,B.type,A.Authorization),b=c(a,b,A.accessTo),b=c(a,b,A.default),b=c(a,b,A.defaultForNew),b=c(a,b,A.agent),b=c(a,b,A.agentGroup),b=c(a,b,A.agentClass),b=c(a,b,A.origin),b=c(a,b,A.mode)}(a);return h=bZ(h,"resource"===e?A.accessTo:A.default,d),"default"===e&&(h=bZ(h,A.defaultForNew,d)),h=ca(h,c,b),cH.filter(a=>a!==c).forEach(a=>{h=bX(h,a)}),[g,h]}(b,e,c,a.internal_accessTo,d);f=a7(f,g),f=a7(f,h)});let g=cF(b);g=ca(g,"resource"===d?A.accessTo:A.default,a.internal_accessTo),g=ca(g,c,e);let h=a7(f,g);return function(a){let b=cs(a),c=b.filter(cA),d=c.reduce(a8,a);return d}(h)}function cJ(a,b){return cG(a,{resourceAcl:b,fallbackAcl:null})}class cK extends Error{constructor(a,b){super(`[${O(a)}] is governed by Access Control Policies in [${O(b)}] rather than by Web Access Control.`)}}function cL(a){return null!==a.internal_acl.resourceAcl&&N(a)===a.internal_acl.resourceAcl.internal_accessTo&&a.internal_resourceInfo.aclUrl===N(a.internal_acl.resourceAcl)}async function cM(a,b=I){let c=await bn(a,b),d=await co(c,b);return cG(c,d)}async function cN(a,b=I){let c=await U(a,b),d=await co(c,b);return cG(c,d)}async function cO(a,b=I){let c=await J(a,b),d=await co(c,b);return cG(c,d)}function cP(a){return cL(a)?a.internal_acl.resourceAcl:null}function cQ(a){return null!==a.internal_acl.fallbackAcl}function cR(a){return cQ(a)?a.internal_acl.fallbackAcl:null}function cS(a){let b=_(Object.assign(Object.assign({},bl()),{internal_accessTo:N(a),internal_resourceInfo:{sourceIri:a.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}}));return b}function cT(a){let b=cS(a),c=cs(a.internal_acl.fallbackAcl),d=cw(c,a.internal_acl.fallbackAcl.internal_accessTo),e=d.map(b=>(b=bX(b,A.default),b=bX(b,A.defaultForNew),b=ca(b,A.accessTo,N(a)),b=ca(b,A.default,N(a)))),f=e.reduce(a7,b);return f}async function cU(a,b,c=I){if(!cW(a))throw Error(`Could not determine the location of the ACL for the Resource at [${N(a)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);let d=await bq(a.internal_resourceInfo.aclUrl,b,c),e=Object.assign(Object.assign({},d),{internal_accessTo:N(a)});return e}async function cV(a,b=I){let c=Object.assign(Object.assign({},I),b),d=await c.fetch(a.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!d.ok)throw Error(`Deleting the ACL of the Resource at [${N(a)}] failed: [${d.status}] [${d.statusText}].`);let e=Object.assign(y(a),{acl:{resourceAcl:null}});return e}function cW(a){return"string"==typeof a.internal_resourceInfo.aclUrl}function cX(a,b){return cL(a)?cZ(a.internal_acl.resourceAcl,b):cQ(a)?c0(a.internal_acl.fallbackAcl,b):null}function cY(a){if(cL(a)){let b=cP(a);return c$(b)}if(cQ(a)){let c=cR(a);return c1(c)}return null}function cZ(a,b){let c=cs(a),d=cu(c,a.internal_accessTo),e=c2(d,b),f=e.map(cy);return cz(f)}function c$(a){let b=cs(a),c=cu(b,a.internal_accessTo),d=c3(c);return c5(d)}function c_(a,b,c){return cI(a,c,A.agent,"resource",b)}function c0(a,b){let c=cs(a),d=cw(c,a.internal_accessTo),e=c2(d,b),f=e.map(cy);return cz(f)}function c1(a){let b=cs(a),c=cw(b,a.internal_accessTo),d=c3(c);return c5(d)}function c2(a,b){return cD(a,b,A.agent)}function c3(a){return a.filter(c4)}function c4(a){return null!==aT(a,A.agent)}function c5(a){return cE(a,A.agent)}function c6(a,b){return cL(a)?c8(a.internal_acl.resourceAcl,b):cQ(a)?da(a.internal_acl.fallbackAcl,b):null}function c7(a){if(cL(a)){let b=cP(a);return c9(b)}if(cQ(a)){let c=cR(a);return db(c)}return null}function c8(a,b){let c=cs(a),d=cu(c,a.internal_accessTo),e=dc(d,b),f=e.map(cy);return cz(f)}function c9(a){let b=cs(a),c=cu(b,a.internal_accessTo);return dd(c)}function da(a,b){let c=cs(a),d=cw(c,a.internal_accessTo),e=dc(d,b),f=e.map(cy);return cz(f)}function db(a){let b=cs(a),c=cw(b,a.internal_accessTo);return dd(c)}function dc(a,b){return cD(a,b,A.agentGroup)}function dd(a){return cE(a,A.agentGroup)}function de(a,b,c){return cI(a,c,A.agentGroup,"resource",b)}function df(a){return cL(a)?dg(a.internal_acl.resourceAcl):cQ(a)?dh(a.internal_acl.fallbackAcl):null}function dg(a){let b=cs(a),c=cu(b,a.internal_accessTo),d=dj(c,D.Agent),e=d.map(cy);return cz(e)}function dh(a){let b=cs(a),c=cw(b,a.internal_accessTo),d=dj(c,D.Agent),e=d.map(cy);return cz(e)}function di(a,b){return cI(a,b,A.agentClass,"resource",D.Agent)}function dj(a,b){return a.filter(a=>dk(a,b))}function dk(a,b){return aV(a,A.agentClass).includes(b)}let dl=n.default.dataset;function dm(a,b={}){var c,d;let e=null!==(d=null===(c=b.datasetFactory)|| void 0===c?void 0:c.dataset)&& void 0!==d?d:dl;return e(aD(a,b))}function dn(a,b){let c=a5(a,b);if(null===c)throw Error(`Profile document [${N(a)}] does not include WebID [${b}]`);return c}function dp(a,b){return aS(dn(a,b),G.publicKey)}let dq=a=>void 0!==a.keys;async function dr(a,b,c=I){let d=Object.assign(Object.assign({},I),c),e=await d.fetch(b);if(!e.ok)throw Error(`Fetching [${b}] returned an error: ${e.status} ${e.statusText}`);try{let f=await e.json();if(!dq(f))throw Error(`[${b}] does not dereference to a valid JWKS: ${JSON.stringify(f)}`);return{keys:[...f.keys,a]}}catch(g){throw Error(`Parsing the document at [${b}] failed: ${g}`)}}async function ds(a,b,c=I){let d=await bn(b,{fetch:c.fetch});if(null===d)throw Error(`The profile document associated with WebID [${b}] could not be retrieved.`);let e=dp(d,b);if(null===e)throw Error(`No key set is declared for the property [${G.publicKey}] in the profile of [${b}]`);let f=await dr(a,e,c);return X(e,new Blob([JSON.stringify(f)]),{contentType:"application/json",fetch:c.fetch})}function dt(a,b){let c=a5(b,a),d=a6(b).filter(a=>aV(a,D.primaryTopic).length>0).map(bc).concat(c?aV(c,D.isPrimaryTopicOf):[]).filter(a=>a!==O(b));return Array.from(new Set(d))}async function du(a,b=I){var c,d;let e=null!==(c=b.fetch)&& void 0!==c?c:v,f=null!==(d=b.webIdProfile)&& void 0!==d?d:await bn(a,{fetch:i.fetch}),g=(await Promise.allSettled(dt(a,f).map(a=>bn(a,{fetch:e})))).filter(a=>"fulfilled"===a.status).map(a=>a.value);return{webIdProfile:f,altProfileAll:g}}async function dv(a,b=I){let c=await du(a,b);return dw(c,a)}function dw(a,b){let c=new Set;return[a.webIdProfile,...a.altProfileAll].forEach(a=>{let d=a5(a,b);null!==d&&aV(d,H.storage).forEach(a=>c.add(a))}),Array.from(c)}let dx={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"};async function dy(a,b){let{prefixes:c=dx,thing:d}=Object.assign({},b),e=new h.Writer({format:"application/turtle",prefixes:c}),f=d?new h.NamedNode(d):void 0;for(let g of dm(a).match(f))e.addQuad(g);return new Promise((a,b)=>{e.end((c,d)=>{c?b(c):a(d)})})}function dz(a){if(!et(a))throw Error(`An Access Control Resource for [${N(a)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return a.internal_acp.acr}function dA(a,b){return Object.assign(y(a),{internal_acp:Object.assign(Object.assign({},a.internal_acp),{acr:b})})}function dB(a){let b=a9(a);return ca(b,B.type,E.AccessControl)}function dC(a,b){let c=dz(a),d=a6(c,b),e=d.filter(a=>aV(a,B.type).includes(E.AccessControl)),f=d.filter(a=>aV(a,E.accessControl).length>0).map(a=>{let b=aV(a,E.accessControl)[0];return a9({url:b})});return e.concat(f)}function dD(a,b){let c=dz(a),d=a7(c,b),e=dA(a,d);return e}function dE(a,b){return bK(a,E.apply,b)}function dF(a){return aV(a,E.apply)}function dG(a,b){return bZ(a,E.apply,b)}function dH(a){return bX(a,E.apply)}function dI(a,b){return bK(a,E.applyMembers,b)}function dJ(a){return aV(a,E.applyMembers)}function dK(a){return bX(a,E.applyMembers)}function dL(a){let b=dC(a);return 0===b.length?dB():b[0]}function dM(a){return r(a)&&Array.isArray(a.internal_resourceInfo.linkedResources[E.accessControl])&&1===a.internal_resourceInfo.linkedResources[E.accessControl].length}function dN(a,b){var c;let d=dz(a),e=N(d),f=null!==(c=a5(d,e))&& void 0!==c?c:a9({url:e});f=bK(f,E.access,b);let g=a7(d,f),h=dA(a,g);return h}function dO(a,b){var c;let d=dz(a),e=N(d),f=null!==(c=a5(d,e))&& void 0!==c?c:a9({url:e});f=bK(f,E.accessMembers,b);let g=a7(d,f),h=dA(a,g);return h}function dP(a){let b=dz(a),c=N(b),d=a5(b,c);return null===d?[]:aV(d,E.access)}function dQ(a){let b=dz(a),c=N(b),d=a5(b,c);return null===d?[]:aV(d,E.accessMembers)}function dR(a,b){let c=dz(a),d=N(c),e=a5(c,d);if(null===e)return a;let f=bZ(e,E.access,b),g=a7(c,f);return dA(a,g)}function dS(a,b){let c=dz(a),d=N(c),e=a5(c,d);if(null===e)return a;let f=bZ(e,E.accessMembers,b),g=a7(c,f);return dA(a,g)}function dT(a){let b=dz(a),c=N(b),d=a5(b,c);if(null===d)return a;let e=bX(d,E.access),f=a7(b,e);return dA(a,f)}function dU(a){let b=dz(a),c=N(b),d=a5(b,c);if(null===d)return a;let e=bX(d,E.accessMembers),f=a7(b,e);return dA(a,f)}function dV(a,b){let c=dL(a),d=dE(c,b),e=dD(a,d);return e}function dW(a,b){let c=dL(a),d=dI(c,b),e=dD(a,d);return e}function dX(a){let b=dC(a),c=b.map(a=>dF(a)),d=new Set;return c.forEach(a=>{a.forEach(a=>d.add(a))}),Array.from(d)}function dY(a){let b=dC(a),c=b.map(a=>dJ(a)),d=new Set;return c.forEach(a=>{a.forEach(a=>d.add(a))}),Array.from(d)}function dZ(a,b){let c=dC(a),d=c.map(a=>dG(a,b)),e=d.reduce(dD,a);return e}function d$(a,b){let c=dC(a),d=c.map(a=>{var c,d;return c=a,d=b,bZ(c,E.applyMembers,d)}),e=d.reduce(dD,a);return e}function d_(a){let b=dC(a),c=b.map(a=>dH(a)),d=c.reduce(dD,a);return d}function d0(a){let b=dC(a),c=b.map(a=>dK(a)),d=c.reduce(dD,a);return d}function d1(a){let b=`# Access controls for ${N(a)}
`,c=dX(a),d=dY(a),e=dP(a),f=dQ(a);return 0===c.length&&0===d.length&&0===e.length&&0===f.length&&(b+="\n<no policies specified yet>\n"),c.length>0&&(b+="\nThe following policies apply to this resource:\n- ",b+=`${c.join("\n- ")}
`),e.length>0&&(b+="\nThe following policies apply to the access control resource for this resource:\n- ",b+=`${e.join("\n- ")}
`),d.length>0&&(b+="\nThe following policies apply to the children of this resource:\n- ",b+=`${d.join("\n- ")}
`),f.length>0&&(b+="\nThe following policies apply to the access control resources for children of this resource:\n- ",b+=`${f.join("\n- ")}
`),b}let d2="http://www.w3.org/ns/solid/acp#",d3={AccessControl:d2.concat("AccessControl"),AccessControlResource:d2.concat("AccessControlResource"),AuthenticatedAgent:d2.concat("AuthenticatedAgent"),CreatorAgent:d2.concat("CreatorAgent"),Matcher:d2.concat("Matcher"),Policy:d2.concat("Policy"),PublicAgent:d2.concat("PublicAgent"),access:d2.concat("access"),accessControl:d2.concat("accessControl"),agent:d2.concat("agent"),allOf:d2.concat("allOf"),allow:d2.concat("allow"),anyOf:d2.concat("anyOf"),apply:d2.concat("apply"),client:d2.concat("client"),deny:d2.concat("deny"),memberAccessControl:d2.concat("memberAccessControl"),noneOf:d2.concat("noneOf"),vc:d2.concat("vc")},d4="http://www.w3.org/ns/auth/acl#",d5={Append:d4.concat("Append"),Control:d4.concat("Control"),Read:d4.concat("Read"),Write:d4.concat("Write")},d6="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function d7(a){let b=dz(a),c=N(b);return a5(b,c)}let d8="defaultAccessControl",d9="defaultAcrAccessControl",ea="defaultMemberAccessControl",eb="defaultMemberAcrAccessControl";function ec(a,b){let c=dz(a),d=N(c);return d.concat("#").concat(b)}function ed(a,b){let c=dz(a),d=ec(a,b),e=a5(c,d);return null==e?a9({url:d}):e}function ee(a,b){let c=aV(a,b);return{read:c.includes(d5.Read),append:c.includes(d5.Append),write:c.includes(d5.Write),controlRead:!1,controlWrite:!1}}function ef(a,b,c){let d=bX(a,c);return(b.read||b.controlRead)&&(d=bK(d,c,d5.Read)),b.append&&(d=bK(d,c,d5.Append)),(b.write||b.controlWrite)&&(d=bK(d,c,d5.Write)),d}let eg="defaultVcPolicy",eh="defaultVcMatcher";function ei(a,b){var c,d,e,f;let g=dz(a),h=`${O(g)}#${eg}`,i=`${O(g)}#${eh}`,j=ed(a,"defaultAccessControl"),k=null!==(c=d7(a))&& void 0!==c?c:cm({url:O(g)}).addIri(d3.accessControl,j).build();aV(k,d3.accessControl).includes(bc(j))||(k=bK(k,d3.accessControl,j));let l=a5(g,h);null===l&&(l=cm({url:h}).addIri(B.type,d3.Policy).addIri(d3.anyOf,i).build(),j=bK(j,d3.apply,l));let m=null!==(d=a5(g,i))&& void 0!==d?d:cm({url:i}).addIri(B.type,d3.Matcher).addIri(d3.vc,d6).build(),n=ee(l,d3.allow);return l=ef(l,Object.assign(Object.assign({},n),b),d3.allow),g=[k,j,l,m].reduce(a7,g),e=a,f=g,Object.assign(y(e),{internal_acp:{acr:f}})}let ej={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ek=(a,b,c)=>aV(a,b).includes(bc(c));function el(a){let b=dz(a),c=ed(a,"defaultAccessControl"),d=d7(a);if(null===d||!ek(d,d3.accessControl,c))return ej;let e=`${O(b)}#${eg}`,f=a5(b,e);if(null===f||!ek(c,d3.apply,f))return ej;let g=`${O(b)}#${eh}`,h=a5(b,g);return null!==h&&ek(f,d3.anyOf,h)?ee(f,d3.allow):ej}async function em(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await bn(c,d),f=await eu(e,d);return Object.assign(Object.assign({},e),f)}async function en(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await U(c,d),f=await eu(e,d);return Object.assign(e,f)}async function eo(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await J(c,d),f=await eu(e,d);return Object.assign(Object.assign({},e),f)}async function ep(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await bn(c,d);if(cW(e)){let f=await co(e,d);return cG(e,f)}let g=await eu(e,d);return Object.assign(Object.assign({},e),g)}async function eq(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await U(c,d);if(cW(e)){let f=await co(e,d);return cG(e,f)}let g=await eu(e,d);return Object.assign(e,g)}async function er(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await J(c,d);if(cW(e)){let f=await co(e,d);return cG(e,f)}let g=await eu(e,d);return Object.assign(Object.assign({},e),g)}async function es(a,b=I){let c=dz(a),d=Object.assign(Object.assign({},I),b),e=await bq(N(c),c,d);return dA(a,e)}function et(a){return"object"==typeof a.internal_acp&&null!==a.internal_acp&&"object"==typeof a.internal_acp.acr&&null!==a.internal_acp.acr}async function eu(a,b){let c;if(dM(a)){let{linkedResources:d}=a.internal_resourceInfo;[c]=d[E.accessControl]}else if(cW(a)){let e=await J(a.internal_resourceInfo.aclUrl,b);cn(e)&&(c=N(e))}if("string"!=typeof c)return{internal_acp:{acr:null}};let f;try{f=await bn(c,b)}catch(g){return{internal_acp:{acr:null}}}let h=Object.assign(Object.assign({},f),{accessTo:N(a)});return{internal_acp:{acr:h}}}function ev(a){let b=dX(a).map(bk).concat(dY(a).map(bk)).concat(dP(a).map(bk)).concat(dQ(a).map(bk)),c=Array.from(new Set(b));return c}async function ew(a,b=I){let c=u(a),d=Object.assign(Object.assign({},I),b),e=await J(c,d);return et(await eu(e,d))}function ex(a){if(!r(a))return;let b=[E.accessControl,"acl"].map(b=>{if(Array.isArray(a.internal_resourceInfo.linkedResources[b])&&1===a.internal_resourceInfo.linkedResources[b].length)return a.internal_resourceInfo.linkedResources[b][0]});return b.find(a=>void 0!==a)}function ey(a){return aV(a,B.type).includes(E.Rule)}function ez(a,b){return bK(a,E.allOf,b)}function eA(a,b){return bZ(a,E.allOf,b)}function eB(a,b){return ca(a,E.allOf,b)}function eC(a){return aV(a,E.allOf)}function eD(a,b){return bK(a,E.anyOf,b)}function eE(a,b){return bZ(a,E.anyOf,b)}function eF(a,b){return ca(a,E.anyOf,b)}function eG(a){return aV(a,E.anyOf)}function eH(a,b){return bK(a,E.noneOf,b)}function eI(a,b){return bZ(a,E.noneOf,b)}function eJ(a,b){return ca(a,E.noneOf,b)}function eK(a){return aV(a,E.noneOf)}function eL(a){let b=u(a),c=a9({url:b});return b9(c,B.type,E.Rule)}function eM(a,b){let c=dz(a),d=new URL(N(c));d.hash=`#${b}`;let e=a9({url:d.href});return b9(e,B.type,E.Rule)}function eN(a,b){let c=a5(a,b);return null===c||aS(c,B.type)!==E.Rule?null:c}function eO(a,b){let c=dz(a),d=N(c),e=new URL(d);e.hash=`#${b}`;let f=a5(c,e.href);return null!==f&&ey(f)?f:null}function eP(a){let b=a6(a);return b.filter(ey)}function eQ(a){let b=dz(a),c=a6(b);return c.filter(ey)}function eR(a,b){return a8(a,b)}function eS(a,b){let c=dz(a),d;if("string"==typeof b){if(as(b))d=b;else{let e=new URL(N(c));e.hash=`#${b}`,d=e.href}}else d=ap(b)?u(b):bb(b);let f=eO(a,new URL(d).hash.substring(1));if(null===f)return a;let g=a8(c,f),h=dA(a,g);return h}function eT(a,b){return a7(a,b)}function eU(a,b){let c=dz(a),d=a7(c,b),e=dA(a,d);return e}function eV(a){return aV(a,E.agent).filter(a=>a!==E.PublicAgent&&a!==E.AuthenticatedAgent&&a!==E.CreatorAgent)}function eW(a,b){let c=e1(a),d=e4(a),e=e7(a),f=ca(a,E.agent,b);return c&&(f=e2(f)),d&&(f=e5(f)),e&&(f=e8(f)),f}function eX(a,b){return bK(a,E.agent,b)}function eY(a,b){return bZ(a,E.agent,b)}function eZ(a){return aV(a,E.group)}function e$(a,b){return ca(a,E.group,b)}function e_(a,b){return bK(a,E.group,b)}function e0(a,b){return bZ(a,E.group,b)}function e1(a){return aV(a,E.agent).filter(a=>a===E.PublicAgent).length>0}function e2(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return bK(a,E.agent,E.PublicAgent)}function e3(a){return bZ(a,E.agent,E.PublicAgent)}function e4(a){return aV(a,E.agent).filter(a=>a===E.AuthenticatedAgent).length>0}function e5(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return bK(a,E.agent,E.AuthenticatedAgent)}function e6(a){return bZ(a,E.agent,E.AuthenticatedAgent)}function e7(a){return aV(a,E.agent).filter(a=>a===E.CreatorAgent).length>0}function e8(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return bK(a,E.agent,E.CreatorAgent)}function e9(a){return bZ(a,E.agent,E.CreatorAgent)}function fa(a){return aV(a,E.client).filter(a=>a!==F.PublicOidcClient)}function fb(a,b){let c=fe(a),d=ca(a,E.client,b);return c&&(d=ff(d)),d}function fc(a,b){return bK(a,E.client,b)}function fd(a,b){return bZ(a,E.client,b)}function fe(a){return aV(a,E.client).filter(a=>a===F.PublicOidcClient).length>0}function ff(a){return bK(a,E.client,F.PublicOidcClient)}function fg(a){return bZ(a,E.client,F.PublicOidcClient)}function fh(a){let b=`## Rule: ${bb(a)}

`,c="";e1(a)&&(c+="- Everyone\n"),e4(a)&&(c+="- All authenticated agents\n"),e7(a)&&(c+="- The creator of this resource\n"),fe(a)&&(c+="- Users of any client application\n");let d=eV(a);d.length>0&&(c+="- The following agents:\n  - ",c+=`${d.join("\n  - ")}
`);let e=eZ(a);e.length>0&&(c+="- Members of the following groups:\n  - ",c+=`${e.join("\n  - ")}
`);let f=fa(a);return f.length>0&&(c+="- Users of the following client applications:\n  - ",c+=`${f.join("\n  - ")}
`),b+=c.length>0?`This rule applies to:
${c}`:"<empty>\n"}function fi(a){return aV(a,B.type).includes(E.Policy)}function fj(a){let b=u(a),c=a9({url:b});return b9(c,B.type,E.Policy)}function fk(a,b){let c=a5(a,b);return null!==c&&fi(c)?c:null}function fl(a){let b=a6(a),c=b.filter(a=>!be(a)&&fi(a));return c}function fm(a,b){return a8(a,b)}function fn(a,b){return a7(a,b)}function fo(a,b){let c=bX(a,E.allow);return!0===b.read&&(c=bK(c,E.allow,cC.read)),!0===b.append&&(c=bK(c,E.allow,cC.append)),!0===b.write&&(c=bK(c,E.allow,cC.write)),c}function fp(a,b){let c=bX(a,E.allow);return!0===b.read&&(c=bK(c,E.allow,E.Read)),!0===b.append&&(c=bK(c,E.allow,E.Append)),!0===b.write&&(c=bK(c,E.allow,E.Write)),c}function fq(a){let b=aV(a,E.allow);return{read:b.includes(cC.read),append:b.includes(cC.append),write:b.includes(cC.write)}}function fr(a){let b=aV(a,E.allow);return{read:b.includes(E.Read),append:b.includes(E.Append),write:b.includes(E.Write)}}function fs(a,b){let c=bX(a,E.deny);return!0===b.read&&(c=bK(c,E.deny,cC.read)),!0===b.append&&(c=bK(c,E.deny,cC.append)),!0===b.write&&(c=bK(c,E.deny,cC.write)),c}function ft(a,b){let c=bX(a,E.deny);return!0===b.read&&(c=bK(c,E.deny,E.Read)),!0===b.append&&(c=bK(c,E.deny,E.Append)),!0===b.write&&(c=bK(c,E.deny,E.Write)),c}function fu(a){let b=aV(a,E.deny);return{read:b.includes(cC.read),append:b.includes(cC.append),write:b.includes(cC.write)}}function fv(a){let b=aV(a,E.deny);return{read:b.includes(E.Read),append:b.includes(E.Append),write:b.includes(E.Write)}}function fw(a,b){let c=dz(a),d=new URL(N(c));d.hash=`#${b}`;let e=a9({url:d.href});return b9(e,B.type,E.Policy)}function fx(a,b){let c=dz(a),d=N(c),e=new URL(d);e.hash=`#${b}`;let f=a5(c,e.href);return dX(a).includes(e.href)&&null!==f&&fi(f)?f:null}function fy(a,b){let c=dz(a),d=N(c),e=new URL(d);e.hash=`#${b}`;let f=a5(c,e.href);return dP(a).includes(e.href)&&null!==f&&fi(f)?f:null}function fz(a){let b=dz(a),c=dX(a),d=c.map(a=>a5(b,a)),e=d.filter(a=>null!==a&&fi(a));return e}function fA(a){let b=dz(a),c=dP(a),d=c.map(a=>a5(b,a)),e=d.filter(a=>null!==a&&fi(a));return e}function fB(a,b){let c=dz(a),d=b;if("string"==typeof d&& !1===as(d)){let e=new URL(N(c));e.hash=`#${b}`,d=e.href}let f;f="string"==typeof d?d:ap(d)?u(d):bb(d,N(c));let g=fx(a,new URL(f).hash.substring(1));if(null===g)return a;let h=a8(c,d),i=dA(a,h);return dZ(i,f)}function fC(a,b){let c=dz(a),d=b;if("string"==typeof d&& !1===as(d)){let e=new URL(N(c));e.hash=`#${b}`,d=e.href}let f;f="string"==typeof d?d:ap(d)?u(d):bb(d,N(c));let g=fy(a,new URL(f).hash.substring(1));if(null===g)return a;let h=a8(c,d),i=dA(a,h);return dR(i,f)}function fD(a,b){let c=dz(a),d=a7(c,b),e=dA(a,d),f=bb(b,N(c));return dV(e,f)}function fE(a,b){let c=dz(a),d=a7(c,b),e=dA(a,d),f=bb(b,N(c));return dN(e,f)}function fF(a){function b(a,b){return b?"denied":a?"allowed":"unspecified"}let c=fr(a),d=fv(a),e=`## Policy: ${bb(a)}

`;e+=`- Read: ${b(c.read,d.read)}
`,e+=`- Append: ${b(c.append,d.append)}
`,e+=`- Write: ${b(c.write,d.write)}
`;let f=eC(a),g=eG(a),h=eK(a);return 0===f.length&&0===g.length&&0===h.length&&(e+="\n<no rules specified yet>\n"),f.length>0&&(e+="\nAll of these rules should match:\n",e+=`- ${f.join("\n- ")}
`),g.length>0&&(e+="\nAt least one of these rules should match:\n",e+=`- ${g.join("\n- ")}
`),h.length>0&&(e+="\nNone of these rules should match:\n",e+=`- ${h.join("\n- ")}
`),e}function fG(a){let b=new URL("access-control-resource",a).href,c=Object.assign(Object.assign({},bH(b)),{accessTo:a});return c}function fH(a,b=fG(N(a))){let c=Object.assign(y(a),{internal_acp:{acr:b,aprs:{}}});return c}function fI(a,b){return b?e2(a):e3(a)}function fJ(a,b){return b?e5(a):e6(a)}function fK(a,b){return b?e8(a):e9(a)}let fL=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:eq,getFileWithAcr:en,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es}),{acrAsMarkdown:d1,addAcrPolicyUrl:dN,addMemberAcrPolicyUrl:dO,addMemberPolicyUrl:dW,addPolicyUrl:dV,getAcrPolicyUrlAll:dP,getMemberAcrPolicyUrlAll:dQ,getMemberPolicyUrlAll:dY,getPolicyUrlAll:dX,hasLinkedAcr:dM,removeAcrPolicyUrl:dR,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrl:dS,removeMemberAcrPolicyUrlAll:dU,removeMemberPolicyUrl:d$,removeMemberPolicyUrlAll:d0,removePolicyUrl:dZ,removePolicyUrlAll:d_}),{createPolicy:fj,getAllowModes:fr,getDenyModes:fv,getPolicy:fk,getPolicyAll:fl,policyAsMarkdown:fF,removePolicy:fm,setAllowModes:fp,setDenyModes:ft,setPolicy:fn}),{addAgent:eX,addForbiddenRuleUrl:eH,addGroup:e_,addOptionalRuleUrl:eD,addRequiredRuleUrl:ez,createRule:eL,getAgentAll:eV,getForbiddenRuleUrlAll:eK,getGroupAll:eZ,getOptionalRuleUrlAll:eG,getRequiredRuleUrlAll:eC,getRule:eN,getRuleAll:eP,hasAuthenticated:e4,hasCreator:e7,hasPublic:e1,removeAgent:eY,removeForbiddenRuleUrl:eI,removeGroup:e0,removeOptionalRuleUrl:eE,removeRequiredRuleUrl:eA,removeRule:eR,ruleAsMarkdown:fh,setAgent:eW,setForbiddenRuleUrl:eJ,setGroup:e$,setOptionalRuleUrl:eF,setRequiredRuleUrl:eB,setRule:eT}),{addMockAcrTo:fH,mockAcrFor:fG}),{getForbiddenRuleurlAll:eK,setPublic:fI,setAuthenticated:fJ,setCreator:fK}),fM=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:eq,getFileWithAcr:en,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es}),{createPolicy:fj,getAllowModes:fr,getDenyModes:fv,getPolicy:fk,getPolicyAll:fl,policyAsMarkdown:fF,removePolicy:fm,setAllowModes:fp,setDenyModes:ft,setPolicy:fn}),{addAgent:eX,addForbiddenRuleUrl:eH,addGroup:e_,addOptionalRuleUrl:eD,addRequiredRuleUrl:ez,createRule:eL,getAgentAll:eV,getForbiddenRuleUrlAll:eK,getGroupAll:eZ,getOptionalRuleUrlAll:eG,getRequiredRuleUrlAll:eC,getRule:eN,getRuleAll:eP,hasAuthenticated:e4,hasCreator:e7,hasPublic:e1,removeAgent:eY,removeForbiddenRuleUrl:eI,removeGroup:e0,removeOptionalRuleUrl:eE,removeRequiredRuleUrl:eA,removeRule:eR,ruleAsMarkdown:fh,setAgent:eW,setForbiddenRuleUrl:eJ,setGroup:e$,setOptionalRuleUrl:eF,setRequiredRuleUrl:eB,setRule:eT}),{addMockAcrTo:fH,mockAcrFor:fG}),{hasLinkedAcr:dM,addAcrPolicyUrl:dN,addMemberAcrPolicyUrl:dO,getAcrPolicyUrlAll:dP,getMemberAcrPolicyUrlAll:dQ,removeAcrPolicyUrl:dR,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrl:dS,removeMemberAcrPolicyUrlAll:dU}),{createControl:dB,getControl:function(a,b,c){let d=dz(a),e=a5(d,b,c);return null!==e&&aV(e,B.type).includes(E.AccessControl)?e:null},getAllControl:dC,getControlAll:dC,setControl:dD,removeControl:function(a,b){let c=dz(a),d=a8(c,b),e=dA(a,d);return e},addPolicyUrl:dE,getPolicyUrlAll:dF,removePolicyUrl:dG,removePolicyUrlAll:dH,addMemberPolicyUrl:dI,getMemberPolicyUrlAll:dJ,removeMemberPolicyUrl:dJ,removeMemberPolicyUrlAll:dK,getForbiddenRuleurlAll:eK,setPublic:fI,setAuthenticated:fJ,setCreator:fK}),fN=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:eq,getFileWithAcr:en,getLinkedAcrUrl:ex,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es,isAcpControlled:ew}),{acrAsMarkdown:d1,addAcrPolicyUrl:dN,addMemberAcrPolicyUrl:dO,addMemberPolicyUrl:dW,addPolicyUrl:dV,getAcrPolicyUrlAll:dP,getMemberAcrPolicyUrlAll:dQ,getMemberPolicyUrlAll:dY,getPolicyUrlAll:dX,hasLinkedAcr:dM,removeAcrPolicyUrl:dR,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrl:dS,removeMemberAcrPolicyUrlAll:dU,removeMemberPolicyUrl:d$,removeMemberPolicyUrlAll:d0,removePolicyUrl:dZ,removePolicyUrlAll:d_}),{createPolicy:fj,getAllowModes:fr,getDenyModes:fv,getPolicy:fk,getPolicyAll:fl,policyAsMarkdown:fF,removePolicy:fm,setAllowModes:fp,setDenyModes:ft,setPolicy:fn,createResourcePolicyFor:fw,getResourceAcrPolicy:fy,getResourceAcrPolicyAll:fA,getResourcePolicy:fx,getResourcePolicyAll:fz,removeResourceAcrPolicy:fC,removeResourcePolicy:fB,setResourceAcrPolicy:fE,setResourcePolicy:fD}),{addAgent:eX,addGroup:e_,createRule:eL,getAgentAll:eV,getGroupAll:eZ,getRule:eN,getRuleAll:eP,removeAgent:eY,removeGroup:e0,removeRule:eR,ruleAsMarkdown:fh,setAgent:eW,setGroup:e$,setRule:eT,addClient:fc,getClientAll:fa,hasAnyClient:fe,removeClient:fd,setAnyClient:ff,setClient:fb,removeAnyClient:fg,hasAuthenticated:e4,hasCreator:e7,hasPublic:e1,setAuthenticated:e5,setCreator:e8,setPublic:e2,removeAuthenticated:e6,removeCreator:e9,removePublic:e3,getAnyOfRuleUrlAll:eG,addAnyOfRuleUrl:eD,removeAnyOfRuleUrl:eE,setAnyOfRuleUrl:eF,getAllOfRuleUrlAll:eC,addAllOfRuleUrl:ez,removeAllOfRuleUrl:eA,setAllOfRuleUrl:eB,getNoneOfRuleUrlAll:eK,addNoneOfRuleUrl:eH,removeNoneOfRuleUrl:eI,setNoneOfRuleUrl:eJ,createResourceRuleFor:eM,getResourceRule:eO,getResourceRuleAll:eQ,removeResourceRule:eS,setResourceRule:eU}),{addMockAcrTo:fH,mockAcrFor:fG});function fO(a,b){return Object.assign(y(a),{internal_acp:Object.assign(Object.assign({},a.internal_acp),{acr:a7(a.internal_acp.acr,b)})})}function fP(a){return a.includes("Member")?d3.memberAccessControl:d3.accessControl}function fQ(a,b){let c=ec(a,b),d=dz(a),e=d7(a);null==e&&(e=a9({url:N(d)}));let f=aV(e,fP(b));return f.includes(c)?a:(e=cm(e).addUrl(fP(b),c).build(),fO(a,e))}function fR(a,b){let c=fQ(a,d9),d=ed(c,d9);return fO(c,cm(d).addUrl(d3.access,b).build())}function fS(a,b){let c=fQ(a,eb),d=ed(c,eb);return fO(c,cm(d).addUrl(d3.access,b).build())}function fT(a,b){let c=fQ(a,ea),d=ed(c,ea);return fO(c,cm(d).addUrl(d3.apply,b).build())}function fU(a,b){let c=fQ(a,d8),d=ed(c,d8);return fO(c,cm(d).addUrl(d3.apply,b).build())}function fV(a){let b=d7(a);return null===b?[]:aV(b,d3.accessControl)}function fW(a,b,c){let d=dz(a);return Array.from(new Set(b.map(a=>{let b=a5(d,a);return null!==b?aV(b,c):[]}).reduce((a,b)=>a.concat(b),[])))}function fX(a){return fW(a,fV(a),d3.access)}function fY(a){let b=d7(a);return null===b?[]:aV(b,d3.memberAccessControl)}function fZ(a){return fW(a,fY(a),d3.access)}function f$(a){return fW(a,fY(a),d3.apply)}function f_(a){return fW(a,fV(a),d3.apply)}function f0(a,b){let c=ed(a,d9);return fO(a,bZ(c,d3.access,b))}function f1(a,b){let c=ed(a,eb);return fO(a,bZ(c,d3.access,b))}function f2(a,b){let c=ed(a,ea);return fO(a,bZ(c,d3.apply,b))}function f3(a,b){let c=ed(a,d8);return fO(a,bZ(c,d3.apply,b))}function f4(a,b){return fO(a,b)}function f5(a){return aV(a,B.type).includes(E.Matcher)}function f6(a,b){return bK(a,E.allOf,b)}function f7(a,b){return bZ(a,E.allOf,b)}function f8(a,b){return ca(a,E.allOf,b)}function f9(a){return aV(a,E.allOf)}function ga(a,b){return bK(a,E.anyOf,b)}function gb(a,b){return bZ(a,E.anyOf,b)}function gc(a,b){return ca(a,E.anyOf,b)}function gd(a){return aV(a,E.anyOf)}function ge(a,b){return bK(a,E.noneOf,b)}function gf(a,b){return bZ(a,E.noneOf,b)}function gg(a,b){return ca(a,E.noneOf,b)}function gh(a){return aV(a,E.noneOf)}function gi(a){let b=u(a),c=a9({url:b});return b9(c,B.type,E.Matcher)}function gj(a,b){let c=dz(a),d=new URL(N(c));d.hash=`#${b}`;let e=a9({url:d.href});return b9(e,B.type,E.Matcher)}function gk(a,b){let c=a5(a,b);return null!==c&&f5(c)?c:null}function gl(a,b){let c=dz(a),d=N(c),e=new URL(d);e.hash=`#${b}`;let f=a5(c,e.href);return null!==f&&f5(f)?f:null}function gm(a){let b=a6(a);return b.filter(f5)}function gn(a){let b=dz(a),c=a6(b);return c.filter(f5)}function go(a,b){return a8(a,b)}function gp(a,b){let c=dz(a),d;if("string"==typeof b){if(as(b))d=b;else{let e=new URL(N(c));e.hash=`#${b}`,d=e.href}}else d=ap(b)?u(b):bb(b);let f=gl(a,new URL(d).hash.substring(1));if(null===f)return a;let g=a8(c,f),h=dA(a,g);return h}function gq(a,b){return a7(a,b)}function gr(a,b){let c=dz(a),d=a7(c,b),e=dA(a,d);return e}function gs(a){return aV(a,E.agent).filter(a=>a!==E.PublicAgent&&a!==E.AuthenticatedAgent&&a!==E.CreatorAgent)}function gt(a,b){let c=gw(a),d=gz(a),e=gC(a),f=ca(a,E.agent,b);return c&&(f=gx(f)),d&&(f=gA(f)),e&&(f=gD(f)),f}function gu(a,b){return bK(a,E.agent,b)}function gv(a,b){return bZ(a,E.agent,b)}function gw(a){return aV(a,E.agent).filter(a=>a===E.PublicAgent).length>0}function gx(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return bK(a,E.agent,E.PublicAgent)}function gy(a){return bZ(a,E.agent,E.PublicAgent)}function gz(a){return aV(a,E.agent).filter(a=>a===E.AuthenticatedAgent).length>0}function gA(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return bK(a,E.agent,E.AuthenticatedAgent)}function gB(a){return bZ(a,E.agent,E.AuthenticatedAgent)}function gC(a){return aV(a,E.agent).filter(a=>a===E.CreatorAgent).length>0}function gD(a){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return bK(a,E.agent,E.CreatorAgent)}function gE(a){return bZ(a,E.agent,E.CreatorAgent)}function gF(a){return aV(a,E.client).filter(a=>a!==F.PublicOidcClient).concat(aY(a,E.client))}function gG(a,b){return as(b)?bK(a,E.client,b):bS(a,E.client,b)}function gH(a,b){return as(b)?bZ(a,E.client,b):b5(a,E.client,b)}function gI(a){return aV(a,E.client).filter(a=>a===F.PublicOidcClient).length>0}function gJ(a){return bK(a,E.client,F.PublicOidcClient)}let gK=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:eq,getFileWithAcr:en,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es,isAcpControlled:ew,getVcAccess:el,setVcAccess:ei}),{addAcrPolicyUrl:fR,addMemberAcrPolicyUrl:fS,addMemberPolicyUrl:fT,addPolicyUrl:fU,getAcrPolicyUrlAll:fX,getMemberAcrPolicyUrlAll:fZ,getMemberPolicyUrlAll:f$,getPolicyUrlAll:f_,hasLinkedAcr:dM,removeAcrPolicyUrl:f0,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrl:f1,removeMemberAcrPolicyUrlAll:dU,removeMemberPolicyUrl:f2,removeMemberPolicyUrlAll:d0,removePolicyUrl:f3,removePolicyUrlAll:d_}),{createPolicy:fj,getAllowModes:fq,getDenyModes:fu,getPolicy:fk,getPolicyAll:fl,removePolicy:fm,setAllowModes:fo,setDenyModes:fs,setPolicy:fn,createResourcePolicyFor:fw,getResourceAcrPolicy:fy,getResourceAcrPolicyAll:fA,getResourcePolicy:fx,getResourcePolicyAll:fz,removeResourceAcrPolicy:fC,removeResourcePolicy:fB,setResourcePolicy:f4}),{addAgent:gu,createMatcher:gi,getAgentAll:gs,getMatcher:gk,getMatcherAll:gm,removeAgent:gv,removeMatcher:go,setAgent:gt,setMatcher:gq,addClient:gG,getClientAll:gF,hasAnyClient:gI,removeClient:gH,setAnyClient:gJ,setClient:function(a,b){let c=gI(a),d=ca(a,E.client,b);return c&&(d=gJ(d)),d},removeAnyClient:function(a){return bZ(a,E.client,F.PublicOidcClient)},hasAuthenticated:gz,hasCreator:gC,hasPublic:gw,setAuthenticated:gA,setCreator:gD,setPublic:gx,removeAuthenticated:gB,removeCreator:gE,removePublic:gy,getAnyOfMatcherUrlAll:gd,addAnyOfMatcherUrl:ga,removeAnyOfMatcherUrl:gb,setAnyOfMatcherUrl:gc,getAllOfMatcherUrlAll:f9,addAllOfMatcherUrl:f6,removeAllOfMatcherUrl:f7,setAllOfMatcherUrl:f8,getNoneOfMatcherUrlAll:gh,addNoneOfMatcherUrl:ge,removeNoneOfMatcherUrl:gf,setNoneOfMatcherUrl:gg,createResourceMatcherFor:gj,getResourceMatcher:gl,getResourceMatcherAll:gn,removeResourceMatcher:gp,setResourceMatcher:gr}),{addMockAcrTo:fH,mockAcrFor:fG}),gL=[E.agent,E.group];function gM(a,b,c){if(a.inaccessibleUrls.length>0)return null;let d=a.acrPolicies.filter(d=>gN(d,b,c,a)),e=a.policies.filter(d=>gN(d,b,c,a)),f=d.reduce((a,b)=>{let c=Object.assign({},a),d=fr(b);return d.read&&(c.controlRead=!0),d.write&&(c.controlWrite=!0),c},{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),g=e.reduce((a,b)=>{let c=Object.assign({},a),d=fr(b);return d.read&&(c.read=!0),d.append&&(c.append=!0),d.write&&(c.write=!0),c},f),h=d.reduce((a,b)=>{let c=Object.assign({},a),d=fv(b);return!0===d.read&&(c.controlRead=!1),!0===d.write&&(c.controlWrite=!1),c},g),i=e.reduce((a,b)=>{let c=Object.assign({},a),d=fv(b);return!0===d.read&&(c.read=!1),!0===d.append&&(c.append=!1),!0===d.write&&(c.write=!1),c},h);return i}function gN(a,b,c,d){let e=aV(a,E.allow),f=aV(a,E.deny);if(e.length+f.length===0)return!1;let g=eC(a).map(a=>d.rules.find(b=>bc(b)===a)),h=eG(a).map(a=>d.rules.find(b=>bc(b)===a)),i=eK(a).map(a=>d.rules.find(b=>bc(b)===a));return g.every(a=>gP(a,b,c))&&(0===h.length||h.some(a=>gP(a,b,c)))&&0===i.length}function gO(a,b){let c=aV(a,E.allow),d=aV(a,E.deny);return!0===b.read&&d.includes(E.Read)|| !1===b.read&&c.includes(E.Read)&&!d.includes(E.Read)|| !0===b.append&&d.includes(E.Append)|| !1===b.append&&c.includes(E.Append)&&!d.includes(E.Append)|| !0===b.write&&d.includes(E.Write)|| !1===b.write&&c.includes(E.Write)&&!d.includes(E.Write)}function gP(a,b,c){let d=!0;return gL.forEach(b=>{d&&(d=null===aT(a,b))}),d||aV(a,b).includes(c)}function gQ(a,b){if(a.inaccessibleUrls.length>0)return null;let c={},d=function(a,b){let c=new Set;return a.rules.forEach(a=>{aV(a,b).filter(a=>![E.PublicAgent,E.CreatorAgent,E.AuthenticatedAgent,].includes(a)||b!==E.agent).forEach(a=>c.add(a))}),c}(a,b);return d.forEach(d=>{let e=gM(a,b,d);c[d]=e}),c}function gR(a,b,c,d,e){var f,g,h,i,j;if(!et(a)||b.inaccessibleUrls.length>0)return null;let k=gM(b,c,d);if(null===k)return null;let l=b.acrPolicies.filter(a=>gN(a,c,d,b)),m=b.policies.filter(a=>gN(a,c,d,b)),n=l.filter(a=>gO(a,{read:e.controlRead,write:e.controlWrite})),o=m.filter(a=>gO(a,{read:e.read,append:e.append,write:e.write})),p=n.filter(a=>gS(a,c,d,b)),q=o.filter(a=>gS(a,c,d,b)),r=Object.assign(Object.assign({},b),{acrPolicies:b.acrPolicies.filter(a=>!p.includes(a)),policies:b.policies.filter(a=>!q.includes(a))}),s=gM(r,c,d);if(null===s)return null;let t=a;p.forEach(e=>{let[f,g]=gU(e,a,b,c,d);t=fE(t,f),t=g.reduce(eU,t)}),q.forEach(e=>{let[f,g]=gU(e,a,b,c,d);t=fD(t,f),t=g.reduce(eU,t)});let u=`rule_${encodeURIComponent(`${c}_${d}`)}`,v=eM(a,u);v=ca(v,c,d);let w=null!==(f=e.controlRead)&& void 0!==f?f:k.controlRead,x=null!==(g=e.controlWrite)&& void 0!==g?g:k.controlWrite,y=p;if(w!==s.controlRead||x!==s.controlWrite){let z=`acr_policy_${encodeURIComponent(`${c}_${d}`)}_${Date.now()}_${Math.random()}`,A=fw(a,z);A=fp(A,{read:!0===w,append:!1,write:!0===x}),A=bK(A,E.allOf,v),t=fE(t,A),t=eU(t,v),y=n}let B=null!==(h=e.read)&& void 0!==h?h:k.read,C=null!==(i=e.append)&& void 0!==i?i:k.append,D=null!==(j=e.write)&& void 0!==j?j:k.write,F=q;if(B!==s.read||C!==s.append||D!==s.write){let G=`policy_${encodeURIComponent(`${c}_${d}`)}_${Date.now()}_${Math.random()}`,H=fw(a,G);H=fp(H,{read:!0===B,append:!0===C,write:!0===D}),H=bK(H,E.allOf,v),t=fD(t,H),t=eU(t,v),F=o}return y.forEach(a=>{t=dR(t,bc(a))}),F.forEach(a=>{t=dZ(t,bc(a))}),t}function gS(a,b,c,d){let e=aV(a,E.allOf).map(a=>d.rules.find(b=>bc(b)===a)),f=e.some(a=>gT(a,b,c)),g=aV(a,E.anyOf).map(a=>d.rules.find(b=>bc(b)===a)),h=g.some(a=>gT(a,b,c)),i=aV(a,E.noneOf).map(a=>d.rules.find(b=>bc(b)===a)),j=i.some(a=>gT(a,b,c));return f||h||j}function gT(a,b,c){let d=[];return gL.forEach(e=>{let f=aV(a,e).filter(a=>a!==c||e!==b);d.push(...f)}),d.length>0}function gU(a,b,c,d,e){let f=`_copy_without_${encodeURIComponent(d)}_${e}_${Date.now()}_${Math.random()}`,g=gV(aV(a,E.allOf),b,c,f,d,e),h=gV(aV(a,E.anyOf),b,c,f,d,e),i=gV(aV(a,E.noneOf),b,c,f,d,e),j=fw(b,encodeURI(bc(a))+f);return aV(a,E.allow).forEach(a=>{j=bK(j,E.allow,a)}),aV(a,E.deny).forEach(a=>{j=bK(j,E.deny,a)}),g.forEach(a=>{j=bK(j,E.allOf,a)}),h.forEach(a=>{j=bK(j,E.anyOf,a)}),i.forEach(a=>{j=bK(j,E.noneOf,a)}),[j,g.concat(h).concat(i),]}function gV(a,b,c,d,e,f){return a.map(a=>{let g=c.rules.find(b=>bc(b)===a);if(void 0===g)return null;let h=eM(b,encodeURI(bc(g))+d),i=!1;return gL.forEach(a=>{aV(g,a).forEach(b=>{(a!==e||b!==f)&&(i=!0,h=bK(h,a,b))})}),i?h:null}).filter(gW)}function gW(a){return null!==a}async function gX(a,b=I){let c=dP(a),d=dX(a),e=gZ(c).concat(gZ(d)),f=await g$(e,b),g=g_(c,f).filter(gW),h=g_(d,f).filter(gW),i=new Set;g.forEach(a=>{let b=g0(a);b.forEach(a=>{i.add(a)})}),h.forEach(a=>{let b=g0(a);b.forEach(a=>{i.add(a)})});let j=Array.from(i),k=j.map(a=>gY(a)),l=k.filter(a=>!e.includes(a)),m=await g$(l,b),n=Object.assign(Object.assign({},f),m),o=g_(j,n).filter(gW),p=Object.keys(n).filter(a=>null===n[a]);return{inaccessibleUrls:p,acrPolicies:g,policies:h,rules:o}}function gY(a){let b=new URL(a);return b.hash="",b.href}function gZ(a){let b=[];return a.forEach(a=>{let c=gY(a);b.includes(c)||b.push(c)}),b}async function g$(a,b){let c=Array.from(new Set(a)),d={};return await Promise.all(c.map(async a=>{try{let c=await bn(a,b);d[a]=c}catch(e){d[a]=null}})),d}function g_(a,b){return a.map(a=>{let c=gY(a),d=b[c];return d?a5(d,a):null})}function g0(a){return eC(a).concat(eG(a)).concat(eK(a))}function g1(a,b){var c,d,e,f;if(a.controlRead!==a.controlWrite)throw Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:null!==(c=a.read)&& void 0!==c?c:b.read,append:null!==(d=a.append)&& void 0!==d?d:b.append,write:null!==(e=a.write)&& void 0!==e?e:b.write,control:null!==(f=a.controlRead)&& void 0!==f?f:b.control}}function g2(a){return{read:a.read,write:a.write,append:a.append,controlRead:a.control,controlWrite:a.control}}async function g3(a,b,c,d){let e=await co(a,d),f=c(cG(a,e),b);return null===f?null:g2(f)}async function g4(a,b,c){let d=await co(a,c),e=b(cG(a,d));return null===e?null:g2(e)}async function g5(a,b,c){let d=await co(a,c),e=b(cG(a,d));if(null===e)return null;let f={};for(let[g,h]of Object.entries(e))f[g]=g2(h);return f}function g6(a,b,c=I){return g3(a,b,cX,c)}function g7(a,b,c=I){return g3(a,b,c6,c)}function g8(a,b=I){return g4(a,df,b)}function g9(a,b=I){return g5(a,cY,b)}async function ha(a,b){if(!cW(a))return null;let c=await co(a,b),d=cG(a,c),e;if(cL(d)){var f;e=(f=d).internal_acl.resourceAcl}else{if(!cQ(d))return null;e=cT(d)}return cJ(d,e)}async function hb(a,b,c){let d=null;try{return d=await cU(a,b,c),cJ(a,d)}catch(e){return null}}async function hc(a,b,c,d,e){let f=await ha(a,e);if(null===f)return null;let g=cP(f),h=c(f),i=g1(b,h),j=d(g,i);return hb(f,j,e)}async function hd(a,b,c,d,e,f){let g=await ha(a,f);if(null===g)return null;let h=d(g,b),i=cP(g),j=g1(c,h),k=e(i,b,j);return hb(g,k,f)}async function he(a,b,c,d=I){return hd(a,b,c,cX,c_,d)}async function hf(a,b,c,d=I){return hd(a,b,c,c6,de,d)}async function hg(a,b,c=I){return hc(a,b,df,di,c)}var hh=Object.freeze({__proto__:null,getAccessFor:hi,getAccessForAll:hj,setAccessFor:hk,getAgentAccess:hl,setAgentAccess:hm,getAgentAccessAll:hn,getGroupAccess:ho,getGroupAccessAll:hp,setGroupAccess:hq,getPublicAccess:hr,setPublicAccess:hs});async function hi(a,b,c=I,d=I){if("agent"===b){if("string"!=typeof c)throw Error("When reading Agent-specific access, the given agent cannot be left undefined.");return hl(a,c,d)}if("group"===b){if("string"!=typeof c)throw Error("When reading Group-specific access, the given group cannot be left undefined.");return ho(a,c,d)}if("public"===b){if("string"==typeof c)throw Error(`When reading public access, no actor type should be specified (here [${c}]).`);return hr(a,c)}return null}async function hj(a,b,c=I){return"agent"===b?hn(a,c):"group"===b?hp(a,c):null}async function hk(a,b,c,d=I,e=I){if("agent"===b){if("string"!=typeof d)throw Error("When writing Agent-specific access, the given agent cannot be left undefined.");return hm(a,d,c,e)}if("group"===b){if("string"!=typeof d)throw Error("When writing Group-specific access, the given group cannot be left undefined.");return hq(a,d,c,e)}if("public"===b){if("string"==typeof d)throw Error(`When writing public access, no actor type should be specified (here [${d}]).`);return hs(a,c,d)}return null}async function hl(a,b,c=I){let d=await eo(a,c);if(et(d)){var e,f;let g=await gX(d,c);return e=g,f=b,gM(e,E.agent,f)}return cW(d)?g6(d,b,c):null}async function hm(a,b,c,d=I){let e=await eo(a,d);if(et(e)){var f,g,h,i;let j=await gX(e,d),k=(f=e,g=j,h=b,i=c,gR(f,g,E.agent,h,i));if(k)try{return await es(k,d),await hl(a,b,d)}catch(l){}return null}if(cW(e)){if(c.controlRead!==c.controlWrite)throw Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${O(e)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);let m=c;return await he(e,b,m,d),g6(e,b,d)}return null}async function hn(a,b=I){let c=await eo(a,b);if(et(c)){var d;let e=await gX(c,b);return gQ(d=e,E.agent)}return cW(c)?g9(c,b):null}async function ho(a,b,c=I){let d=await eo(a,c);if(et(d)){var e,f;let g=await gX(d,c);return e=g,f=b,gM(e,E.group,f)}return cW(d)?g7(d,b,c):null}async function hp(a,b=I){let c=await eo(a,b);if(et(c)){var d;let e=await gX(c,b);return gQ(d=e,E.group)}return cW(c)?function(a,b=I){return g5(a,c7,b)}(c,b):null}async function hq(a,b,c,d=I){let e=await eo(a,d);if(et(e)){var f,g,h,i;let j=await gX(e,d),k=(f=e,g=j,h=b,i=c,gR(f,g,E.group,h,i));if(k)try{return await es(k,d),await ho(a,b,d)}catch(l){}return null}if(cW(e)){if(c.controlRead!==c.controlWrite)throw Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${O(e)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);let m=c;return await hf(e,b,m,d),g7(e,b,d)}return null}async function hr(a,b=I){let c=await eo(a,b);if(et(c)){var d;let e=await gX(c,b);return gM(d=e,E.agent,E.PublicAgent)}return cW(c)?g8(c,b):null}async function hs(a,b,c=I){let d=await eo(a,c);if(et(d)){var e,f,g;let h=await gX(d,c),i=(e=d,f=h,g=b,gR(e,f,E.agent,E.PublicAgent,g));if(i)try{return await es(i,c),await hr(a,c)}catch(j){}return null}if(cW(d)){if(b.controlRead!==b.controlWrite)throw Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${O(d)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);let k=b;return await hg(d,k,c),g8(d,c)}return null}var ht=Object.freeze({__proto__:null,getAgentAccess:hl,setAgentAccess:hm,getAgentAccessAll:hn,getGroupAccess:ho,getGroupAccessAll:hp,setGroupAccess:hq,getPublicAccess:hr,setPublicAccess:hs,getAccessFor:hi,getAccessForAll:hj,setAccessFor:hk});let hu=[E.agent];function hv(a,b,c){if(a.inaccessibleUrls.length>0)return null;let d=a.acrPolicies.filter(d=>hw(d,b,c,a)),e=a.policies.filter(d=>hw(d,b,c,a)),f=d.reduce((a,b)=>{let c=Object.assign({},a),d=fq(b);return d.read&&(c.controlRead=!0),d.write&&(c.controlWrite=!0),c},{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),g=e.reduce((a,b)=>{let c=Object.assign({},a),d=fq(b);return d.read&&(c.read=!0),d.append&&(c.append=!0),d.write&&(c.write=!0),c},f),h=d.reduce((a,b)=>{let c=Object.assign({},a),d=fu(b);return!0===d.read&&(c.controlRead=!1),!0===d.write&&(c.controlWrite=!1),c},g),i=e.reduce((a,b)=>{let c=Object.assign({},a),d=fu(b);return!0===d.read&&(c.read=!1),!0===d.append&&(c.append=!1),!0===d.write&&(c.write=!1),c},h);return i}function hw(a,b,c,d){let e=aV(a,E.allow),f=aV(a,E.deny);if(e.length+f.length===0)return!1;let g=f9(a).map(a=>d.matchers.find(b=>bc(b)===a)),h=gd(a).map(a=>d.matchers.find(b=>bc(b)===a)),i=gh(a).map(a=>d.matchers.find(b=>bc(b)===a));return g.every(a=>hy(a,b,c))&&(0===h.length||h.some(a=>hy(a,b,c)))&&g.length+h.length>0&&0===i.length}function hx(a,b){let c=aV(a,E.allow),d=aV(a,E.deny);return!0===b.read&&d.includes(cC.read)|| !1===b.read&&c.includes(cC.read)&&!d.includes(cC.read)|| !0===b.append&&d.includes(cC.append)|| !1===b.append&&c.includes(cC.append)&&!d.includes(cC.append)|| !0===b.write&&d.includes(cC.write)|| !1===b.write&&c.includes(cC.write)&&!d.includes(cC.write)}function hy(a,b,c){return aV(a,b).includes(c)}function hz(a,b,c,d,e){var f,g,h,i,j;if(!et(a)||b.inaccessibleUrls.length>0)return null;let k=hv(b,c,d);if(null===k)return null;let l=b.acrPolicies.filter(a=>hw(a,c,d,b)),m=b.policies.filter(a=>hw(a,c,d,b)),n=l.filter(a=>hx(a,{read:e.controlRead,write:e.controlWrite})),o=m.filter(a=>hx(a,{read:e.read,append:e.append,write:e.write})),p=n.filter(a=>hA(a,c,d,b)),q=o.filter(a=>hA(a,c,d,b)),r=Object.assign(Object.assign({},b),{acrPolicies:b.acrPolicies.filter(a=>!p.includes(a)),policies:b.policies.filter(a=>!q.includes(a))}),s=hv(r,c,d);if(null===s)return null;let t=a;p.forEach(e=>{let[f,g]=hC(e,a,b,c,d);t=fE(t,f),t=g.reduce(gr,t)}),q.forEach(e=>{let[f,g]=hC(e,a,b,c,d);t=fD(t,f),t=g.reduce(gr,t)});let u=`matcher_${encodeURIComponent(`${c}_${d}`)}`,v=gj(a,u);v=ca(v,c,d);let w=null!==(f=e.controlRead)&& void 0!==f?f:k.controlRead,x=null!==(g=e.controlWrite)&& void 0!==g?g:k.controlWrite,y=p;if(w!==s.controlRead||x!==s.controlWrite){let z=`acr_policy_${encodeURIComponent(`${c}_${d}`)}_${Date.now()}_${Math.random()}`,A=fw(a,z);A=fo(A,{read:!0===w,append:!1,write:!0===x}),A=bK(A,E.allOf,v),t=fE(t,A),t=gr(t,v),y=n}let B=null!==(h=e.read)&& void 0!==h?h:k.read,C=null!==(i=e.append)&& void 0!==i?i:k.append,D=null!==(j=e.write)&& void 0!==j?j:k.write,F=q;if(B!==s.read||C!==s.append||D!==s.write){let G=`policy_${encodeURIComponent(`${c}_${d}`)}_${Date.now()}_${Math.random()}`,H=fw(a,G);H=fo(H,{read:!0===B,append:!0===C,write:!0===D}),H=bK(H,E.allOf,v),t=fD(t,H),t=gr(t,v),F=o}return y.forEach(a=>{t=dR(t,bc(a))}),F.forEach(a=>{t=dZ(t,bc(a))}),t}function hA(a,b,c,d){let e=aV(a,E.allOf).map(a=>d.matchers.find(b=>bc(b)===a)),f=e.some(a=>hB(a,b,c)),g=aV(a,E.anyOf).map(a=>d.matchers.find(b=>bc(b)===a)),h=g.some(a=>hB(a,b,c)),i=aV(a,E.noneOf).map(a=>d.matchers.find(b=>bc(b)===a)),j=i.some(a=>hB(a,b,c));return f||h||j}function hB(a,b,c){let d=[];return hu.forEach(e=>{let f=aV(a,e).filter(a=>a!==c||e!==b);d.push(...f)}),d.length>0}function hC(a,b,c,d,e){let f=`_copy_without_${encodeURIComponent(d)}_${e}_${Date.now()}_${Math.random()}`,g=hD(aV(a,E.allOf),b,c,f,d,e),h=hD(aV(a,E.anyOf),b,c,f,d,e),i=hD(aV(a,E.noneOf),b,c,f,d,e),j=fw(b,encodeURI(bc(a))+f);return aV(a,E.allow).forEach(a=>{j=bK(j,E.allow,a)}),aV(a,E.deny).forEach(a=>{j=bK(j,E.deny,a)}),g.forEach(a=>{j=bK(j,E.allOf,a)}),h.forEach(a=>{j=bK(j,E.anyOf,a)}),i.forEach(a=>{j=bK(j,E.noneOf,a)}),[j,g.concat(h).concat(i),]}function hD(a,b,c,d,e,f){return a.map(a=>{let g=c.matchers.find(b=>bc(b)===a);if(void 0===g)return null;let h=gj(b,encodeURI(bc(g))+d),i=!1;return hu.forEach(a=>{aV(g,a).forEach(b=>{(a!==e||b!==f)&&(i=!0,h=bK(h,a,b))})}),i?h:null}).filter(hE)}function hE(a){return null!==a}async function hF(a,b=I){let c=dP(a),d=dX(a),e=hH(c).concat(hH(d)),f=await hI(e,b),g=hJ(c,f).filter(hE),h=hJ(d,f).filter(hE),i=new Set;g.forEach(a=>{let b=hK(a);b.forEach(a=>{i.add(a)})}),h.forEach(a=>{let b=hK(a);b.forEach(a=>{i.add(a)})});let j=Array.from(i),k=j.map(a=>hG(a)),l=k.filter(a=>!e.includes(a)),m=await hI(l,b),n=Object.assign(Object.assign({},f),m),o=hJ(j,n).filter(hE),p=Object.keys(n).filter(a=>null===n[a]);return{inaccessibleUrls:p,acrPolicies:g,policies:h,matchers:o}}function hG(a){let b=new URL(a);return b.hash="",b.href}function hH(a){let b=[];return a.forEach(a=>{let c=hG(a);b.includes(c)||b.push(c)}),b}async function hI(a,b){let c=Array.from(new Set(a)),d={};return await Promise.all(c.map(async a=>{try{let c=await bn(a,b);d[a]=c}catch(e){d[a]=null}})),d}function hJ(a,b){return a.map(a=>{let c=hG(a),d=b[c];return d?a5(d,a):null})}function hK(a){return f9(a).concat(gd(a)).concat(gh(a))}async function hL(a,b,c=I){let d=await eo(a,c);if(et(d)){var e,f;let g=await hF(d,c);return e=g,f=b,hv(e,E.agent,f)}return cW(d)?g6(d,b,c):null}async function hM(a,b,c,d=I){let e=await eo(a,d);if(et(e)){var f,g,h,i;let j=await hF(e,d),k=(f=e,g=j,h=b,i=c,hz(f,g,E.agent,h,i));if(k)try{return await es(k,d),await hL(a,b,d)}catch(l){}return null}if(cW(e)){if(c.controlRead!==c.controlWrite)throw Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${O(e)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);let m=c;return await he(e,b,m,d),g6(e,b,d)}return null}async function hN(a,b=I){let c=await eo(a,b);if(et(c)){var d;let e=await hF(c,b);return function(a,b){if(a.inaccessibleUrls.length>0)return null;let c={},d=function(a,b){let c=new Set;return a.matchers.forEach(a=>{aV(a,b).filter(a=>![E.PublicAgent,E.CreatorAgent,E.AuthenticatedAgent,].includes(a)||b!==E.agent).forEach(a=>c.add(a))}),c}(a,b);return d.forEach(d=>{let e=hv(a,b,d);c[d]=e}),c}(d=e,E.agent)}return cW(c)?g9(c,b):null}async function hO(a,b=I){let c=await eo(a,b);if(et(c)){var d;let e=await hF(c,b);return hv(d=e,E.agent,E.PublicAgent)}return cW(c)?g8(c,b):null}async function hP(a,b,c=I){let d=await eo(a,c);if(et(d)){var e,f,g;let h=await hF(d,c),i=(e=d,f=h,g=b,hz(e,f,E.agent,E.PublicAgent,g));if(i)try{return await es(i,c),await hO(a,c)}catch(j){}return null}if(cW(d)){if(b.controlRead!==b.controlWrite)throw Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${O(d)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);let k=b;return await hg(d,k,c),g8(d,c)}return null}var hQ=Object.freeze({__proto__:null,getAgentAccess:hL,setAgentAccess:hM,getAgentAccessAll:hN,getPublicAccess:hO,setPublicAccess:hP,getAccessFor:hi,getAccessForAll:hj,setAccessFor:hk});async function hR(a,b){return"string"==typeof a.internal_resourceInfo.aclUrl?J(a.internal_resourceInfo.aclUrl,b):null}function hS(a,b,c){let d=aU(b,d3.allOf).map(b=>a5(dz(a),b)).filter(a=>null!==a),e=d.every(a=>aU(a,d3.agent).includes(c)),f=aU(b,d3.anyOf).map(b=>a5(dz(a),b)).filter(a=>null!==a),g=f.some(a=>aU(a,d3.agent).includes(c)),h=aU(b,d3.noneOf).map(b=>a5(dz(a),b)).filter(a=>null!==a),i=h.some(a=>aU(a,d3.agent).includes(c));return d.length+f.length>0&&(0===d.length||e)&&(0===f.length||g)&&(0===h.length||!i)}function hT(a,b,c){var d,e;let f=ee(d=a,d3.allow),g=ee(e=a,d3.deny);return"control"===c?{read:b.read,append:b.append,write:b.write,controlRead:(b.controlRead||f.read)&&!g.read,controlWrite:(b.controlWrite||f.write)&&!g.write}:{read:(b.read||f.read)&&!g.read,append:(b.append||f.append)&&!g.append,write:(b.write||f.write)&&!g.write,controlRead:b.controlRead,controlWrite:b.controlWrite}}async function hU(a,b){let c={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},d=f_(a).map(b=>a5(dz(a),b)).filter(a=>null!==a);d.forEach(d=>{hS(a,d,b)&&(c=hT(d,c,"resource"))});let e=fX(a).map(b=>a5(dz(a),b)).filter(a=>null!==a);return e.forEach(d=>{hS(a,d,b)&&(c=hT(d,c,"control"))}),c}async function hV(a,b){let c=function(a){let b=a.internal_resourceInfo.linkedResources[d3.accessControl];return Array.isArray(b)&&1===b.length?b[0]:null}(a);if(null!==c)return c;let d=await hR(a,b);if(null===d)return null;let e=Q(d).type;return Array.isArray(e)&&e.includes(d3.AccessControlResource)?N(d):null}async function hW(a,b){let c=await hV(a,b);if(null===c)return null;let d;try{d=await bn(c,b)}catch(e){return null}return Object.assign(Object.assign({},a),{internal_acp:{acr:Object.assign(Object.assign({},d),{accessTo:N(a)})}})}async function hX(a,b,c){let d=await J(a,c),e=await hW(d,c);return null===e?g6(d,b,c):hU(e,b)}async function hY(a){var b;return(await Promise.all((b=a,Array.from(new Set(a6(dz(b)).map(a=>aU(a,d3.agent)).reduce((a,b)=>a.concat(b),[])))).map(async b=>({[b]:await hU(a,b)})))).reduce((a,b)=>Object.assign(Object.assign({},a),b),{})}async function hZ(a,b){let c=await J(a,b),d=await hW(c,b);return null===d?g9(c,b):hY(d)}async function h$(a){return hU(a,d3.PublicAgent)}async function h_(a,b){let c=await J(a,b),d=await hW(c,b);return null===d?g8(c,b):h$(d)}function h0(a,b,c){return ec(a,b).concat("AgentMatcher").concat(c.charAt(0).toUpperCase()+c.slice(1)).concat("Policy")}function h1(a,b,c){return h0(a,b,c).concat("Matcher")}let h2=d3.anyOf;function h3(a,b,c,d,e){var f;let g=h1(a,c,d),h=function(a,b,c){let d=h0(a,b,c),e=h1(a,b,c),f=a5(dz(a),d);f||(a=function(a,b,c){let d=h0(a,b,c);return d.includes("Acr")?fR(a,d):fU(a,d)}(a,b,c),f=a9({url:d}),f=ef(f,{[c]:!0},d3.allow));let g=aV(f,h2);return g.includes(e)?a:(f=cm(f).addUrl(h2,e).build(),fO(a,f))}(a,c,d),i=null!==(f=a5(dz(h),g))&& void 0!==f?f:a9({url:g});return fO(h,"add"===e?gu(i,b):gv(i,b))}async function h4(a,b,c){let d=await hU(a,b);return"boolean"==typeof c.read&&d.read!==c.read&&(a=h3(a,b,d8,"read",c.read?"add":"remove")),"boolean"==typeof c.append&&d.append!==c.append&&(a=h3(a,b,d8,"append",c.append?"add":"remove")),"boolean"==typeof c.write&&d.write!==c.write&&(a=h3(a,b,d8,"write",c.write?"add":"remove")),"boolean"==typeof c.controlRead&&d.controlRead!==c.controlRead&&(a=h3(a,b,d9,"controlRead",c.controlRead?"add":"remove")),"boolean"==typeof c.controlWrite&&d.controlWrite!==c.controlWrite&&(a=h3(a,b,d9,"controlWrite",c.controlWrite?"add":"remove")),a}async function h5(a,b,c,d){let e=await J(a,d),f=await hW(e,d);if(null===f)return await he(e,b,c,d),g6(e,b,d);try{return await es(await h4(f,b,c),d),await hX(a,b,d)}catch(g){return null}}async function h6(a,b){return h4(a,d3.PublicAgent,b)}async function h7(a,b,c){let d=await J(a,c),e=await hW(d,c);if(null===e)return await hg(d,b,c),g8(d,c);try{return await es(await h6(e,b),c),await h_(a,c)}catch(f){return null}}var h8=Object.freeze({__proto__:null,getAclServerResourceInfo:hR,getAgentAccess:hX,getAgentAccessAll:hZ,getPublicAccess:h_,setAgentAccess:h5,setPublicAccess:h7}),h9=Object.freeze({__proto__:null,getFileWithAccessDatasets:eq,getFileWithAcr:en,getLinkedAcrUrl:ex,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es,isAcpControlled:ew,acrAsMarkdown:d1,addAcrPolicyUrl:dN,addMemberAcrPolicyUrl:dO,addMemberPolicyUrl:dW,addPolicyUrl:dV,getAcrPolicyUrlAll:dP,getMemberAcrPolicyUrlAll:dQ,getMemberPolicyUrlAll:dY,getPolicyUrlAll:dX,hasLinkedAcr:dM,removeAcrPolicyUrl:dR,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrl:dS,removeMemberAcrPolicyUrlAll:dU,removeMemberPolicyUrl:d$,removeMemberPolicyUrlAll:d0,removePolicyUrl:dZ,removePolicyUrlAll:d_,createPolicy:fj,getAllowModes:fr,getDenyModes:fv,getPolicy:fk,getPolicyAll:fl,policyAsMarkdown:fF,removePolicy:fm,setAllowModes:fp,setDenyModes:ft,setPolicy:fn,createResourcePolicyFor:fw,getResourceAcrPolicy:fy,getResourceAcrPolicyAll:fA,getResourcePolicy:fx,getResourcePolicyAll:fz,removeResourceAcrPolicy:fC,removeResourcePolicy:fB,setResourceAcrPolicy:fE,setResourcePolicy:fD,addAgent:eX,addNoneOfRuleUrl:eH,addGroup:e_,addAnyOfRuleUrl:eD,addAllOfRuleUrl:ez,createRule:eL,getAgentAll:eV,getNoneOfRuleUrlAll:eK,getGroupAll:eZ,getAnyOfRuleUrlAll:eG,getAllOfRuleUrlAll:eC,getRule:eN,getRuleAll:eP,hasAuthenticated:e4,hasCreator:e7,hasPublic:e1,removeAgent:eY,removeNoneOfRuleUrl:eI,removeGroup:e0,removeAnyOfRuleUrl:eE,removeAllOfRuleUrl:eA,removeRule:eR,ruleAsMarkdown:fh,setAgent:eW,setAuthenticated:e5,setCreator:e8,setNoneOfRuleUrl:eJ,setGroup:e$,setAnyOfRuleUrl:eF,setPublic:e2,setAllOfRuleUrl:eB,setRule:eT,addClient:fc,getClientAll:fa,hasAnyClient:fe,removeClient:fd,setAnyClient:ff,setClient:fb,removeAnyClient:fg,removeAuthenticated:e6,removeCreator:e9,removePublic:e3,createResourceRuleFor:eM,getResourceRule:eO,getResourceRuleAll:eQ,removeResourceRule:eS,setResourceRule:eU,addMockAcrTo:fH,mockAcrFor:fG}),ia=Object.freeze({__proto__:null,getFileWithAccessDatasets:eq,getFileWithAcr:en,getLinkedAcrUrl:ex,getReferencedPolicyUrlAll:ev,getResourceInfoWithAccessDatasets:er,getResourceInfoWithAcr:eo,getSolidDatasetWithAccessDatasets:ep,getSolidDatasetWithAcr:em,hasAccessibleAcr:et,saveAcrFor:es,isAcpControlled:ew,hasLinkedAcr:dM,removeAcrPolicyUrlAll:dT,removeMemberAcrPolicyUrlAll:dU,removeMemberPolicyUrlAll:d0,removePolicyUrlAll:d_,addAcrPolicyUrl:fR,addMemberAcrPolicyUrl:fS,addMemberPolicyUrl:fT,addPolicyUrl:fU,getAcrPolicyUrlAll:fX,getMemberAcrPolicyUrlAll:fZ,getMemberPolicyUrlAll:f$,getPolicyUrlAll:f_,removeAcrPolicyUrl:f0,removeMemberAcrPolicyUrl:f1,removeMemberPolicyUrl:f2,removePolicyUrl:f3,setResourcePolicy:f4,createPolicy:fj,getPolicy:fk,getPolicyAll:fl,removePolicy:fm,setPolicy:fn,createResourcePolicyFor:fw,getResourceAcrPolicy:fy,getResourceAcrPolicyAll:fA,getResourcePolicy:fx,getResourcePolicyAll:fz,removeResourceAcrPolicy:fC,removeResourcePolicy:fB,getAllowModes:fq,getDenyModes:fu,setAllowModes:fo,setDenyModes:fs,addAgent:gu,addNoneOfMatcherUrl:ge,addAnyOfMatcherUrl:ga,addAllOfMatcherUrl:f6,createMatcher:gi,getAgentAll:gs,getNoneOfMatcherUrlAll:gh,getAnyOfMatcherUrlAll:gd,getAllOfMatcherUrlAll:f9,getMatcher:gk,getMatcherAll:gm,hasAuthenticated:gz,hasCreator:gC,hasPublic:gw,removeAgent:gv,removeNoneOfMatcherUrl:gf,removeAnyOfMatcherUrl:gb,removeAllOfMatcherUrl:f7,removeMatcher:go,setAgent:gt,setAuthenticated:gA,setCreator:gD,setNoneOfMatcherUrl:gg,setAnyOfMatcherUrl:gc,setPublic:gx,setAllOfMatcherUrl:f8,setMatcher:gq,addClient:gG,getClientAll:gF,removeClient:gH,removeAuthenticated:gB,removeCreator:gE,removePublic:gy,createResourceMatcherFor:gj,getResourceMatcher:gl,getResourceMatcherAll:gn,removeResourceMatcher:gp,setResourceMatcher:gr,addMockAcrTo:fH,mockAcrFor:fG,getVcAccess:el,setVcAccess:ei});b.FetchError=R,b.SolidClientError=t,b.ThingExpectedError=bf,b.access=hh,b.access_v1=ht,b.access_v2=hQ,b.acp_ess_1=h9,b.acp_ess_2=ia,b.acp_v1=fM,b.acp_v2=fL,b.acp_v3=fN,b.acp_v4=gK,b.addBoolean=bL,b.addDate=bN,b.addDatetime=bM,b.addDecimal=bP,b.addInteger=bQ,b.addIri=bK,b.addJwkToJwks=dr,b.addLiteral=bU,b.addMockFallbackAclTo=function(a){let b=cr(O(a)),c=`${b}.acl`,d=function(a,b){let c=Object.assign(y(a),{internal_resourceInfo:Object.assign(Object.assign({},a.internal_resourceInfo),{aclUrl:b})});return c}(bI(b),c),e=cS(d),f=cG(y(a),{resourceAcl:null,fallbackAcl:e});return f},b.addMockResourceAclTo=function(a){var b;let c=null!==(b=a.internal_resourceInfo.aclUrl)&& void 0!==b?b:"https://your.pod/mock-acl.ttl",d=Object.assign(y(a),{internal_resourceInfo:Object.assign(Object.assign({},a.internal_resourceInfo),{aclUrl:c})}),e=cS(d),f=cG(d,{resourceAcl:e,fallbackAcl:null});return f},b.addNamedNode=bT,b.addPublicKeyToProfileJwks=ds,b.addStringEnglish=function(a,b,c){return bR(a,b,c,"en")},b.addStringNoLocale=bS,b.addStringWithLocale=bR,b.addTerm=bV,b.addTime=bO,b.addUrl=bJ,b.asIri=bc,b.asUrl=bb,b.buildThing=cm,b.changeLogAsMarkdown=by,b.createAcl=cS,b.createAclFromFallbackAcl=cT,b.createContainerAt=bs,b.createContainerInContainer=bv,b.createSolidDataset=bl,b.createThing=a9,b.deleteAclFor=cV,b.deleteContainer=bw,b.deleteFile=V,b.deleteSolidDataset=br,b.fromRdfJsDataset=function(a){let b=Array.from(a),c=aC(b),d=b.filter(a=>c.every(b=>!b.equals(a.subject)));return d.reduce((a,d)=>aw(a,d,{otherQuads:b,chainBlankNodes:c}),{graphs:{default:{}},type:"Dataset"})},b.getAgentAccess=cX,b.getAgentAccessAll=cY,b.getAgentDefaultAccess=c0,b.getAgentDefaultAccessAll=c1,b.getAgentResourceAccess=cZ,b.getAgentResourceAccessAll=c$,b.getAltProfileUrlAllFrom=dt,b.getBoolean=function(a,b){aP(a);let c=a3(a,b,af.boolean);return null===c?null:ag(c)},b.getBooleanAll=function(a,b){aP(a);let c=a4(a,b,af.boolean);return c.map(ag).filter(a=>null!==a)},b.getContainedResourceUrlAll=function(a){let b=a5(a,N(a));return null!==b?aV(b,C.contains):[]},b.getContentType=M,b.getDate=function(a,b){aP(a);let c=a3(a,b,af.date);return null===c?null:aj(c)},b.getDateAll=function(a,b){aP(a);let c=a4(a,b,af.date);return c.map(aj).filter(a=>null!==a)},b.getDatetime=function(a,b){aP(a);let c=a3(a,b,af.dateTime);return null===c?null:ai(c)},b.getDatetimeAll=function(a,b){aP(a);let c=a4(a,b,af.dateTime);return c.map(ai).filter(a=>null!==a)},b.getDecimal=function(a,b){aP(a);let c=a3(a,b,af.decimal);return null===c?null:am(c)},b.getDecimalAll=function(a,b){aP(a);let c=a4(a,b,af.decimal);return c.map(a=>am(a)).filter(a=>null!==a)},b.getEffectiveAccess=function(a){var b,c,d,e,f,g,h;if("object"==typeof a.internal_resourceInfo.permissions)return{user:{read:a.internal_resourceInfo.permissions.user.read,append:a.internal_resourceInfo.permissions.user.append,write:a.internal_resourceInfo.permissions.user.write},public:{read:a.internal_resourceInfo.permissions.public.read,append:a.internal_resourceInfo.permissions.public.append,write:a.internal_resourceInfo.permissions.public.write}};let i=Q(a);return{user:{read:null!==(c=null===(b=i[E.allow])|| void 0===b?void 0:b.includes(E.Read))&& void 0!==c&&c,append:null!==(f=(null===(d=i[E.allow])|| void 0===d?void 0:d.includes(E.Append))||(null===(e=i[E.allow])|| void 0===e?void 0:e.includes(E.Write)))&& void 0!==f&&f,write:null!==(h=null===(g=i[E.allow])|| void 0===g?void 0:g.includes(E.Write))&& void 0!==h&&h}}},b.getFallbackAcl=cR,b.getFile=U,b.getFileWithAcl=cN,b.getGroupAccess=c6,b.getGroupAccessAll=c7,b.getGroupDefaultAccess=da,b.getGroupDefaultAccessAll=db,b.getGroupResourceAccess=c8,b.getGroupResourceAccessAll=c9,b.getInteger=function(a,b){aP(a);let c=a3(a,b,af.integer);return null===c?null:an(c)},b.getIntegerAll=function(a,b){aP(a);let c=a4(a,b,af.integer);return c.map(a=>an(a)).filter(a=>null!==a)},b.getIri=aT,b.getIriAll=aV,b.getJsonLdParser=aI,b.getLinkedResourceUrlAll=Q,b.getLiteral=a_,b.getLiteralAll=a0,b.getNamedNode=aZ,b.getNamedNodeAll=a$,b.getPodOwner=P,b.getPodUrlAll=dv,b.getPodUrlAllFrom=dw,b.getProfileAll=du,b.getProfileJwksIri=dp,b.getPropertyAll=function(a){return Object.keys(a.predicates).filter(b=>null!==a1(a,b))},b.getPublicAccess=df,b.getPublicDefaultAccess=dh,b.getPublicResourceAccess=dg,b.getResourceAcl=cP,b.getResourceInfo=J,b.getResourceInfoWithAcl=cO,b.getSolidDataset=bn,b.getSolidDatasetWithAcl=cM,b.getSourceIri=O,b.getSourceUrl=N,b.getStringByLocaleAll=function(a,b){var c,d;if(aP(a),!as(b))throw new bg(b);let e=u(b),f=null!==(d=null===(c=a.predicates[e])|| void 0===c?void 0:c.langStrings)&& void 0!==d?d:{};return new Map(Object.entries(f).map(([a,b])=>[a,[...b],]))},b.getStringEnglish=function(a,b){return aW(a,b,"en")},b.getStringEnglishAll=function(a,b){return aX(a,b,"en")},b.getStringNoLocale=function(a,b){aP(a);let c=a3(a,b,af.string);return c},b.getStringNoLocaleAll=aY,b.getStringWithLocale=aW,b.getStringWithLocaleAll=aX,b.getTerm=a1,b.getTermAll=a2,b.getThing=a5,b.getThingAll=a6,b.getTime=function(a,b){aP(a);let c=a3(a,b,af.time);return null===c?null:ah(c)},b.getTimeAll=function(a,b){aP(a);let c=a4(a,b,af.time);return c.map(ah).filter(a=>null!==a)},b.getTurtleParser=aL,b.getUrl=aS,b.getUrlAll=aU,b.getWellKnownSolid=bF,b.hasAccessibleAcl=cW,b.hasAcl=function(a){return"object"==typeof a.internal_acl},b.hasFallbackAcl=cQ,b.hasResourceAcl=cL,b.hasResourceInfo=q,b.hasServerResourceInfo=r,b.isContainer=L,b.isPodOwner=function(a,b){let c=P(b);return"string"!=typeof c?null:c===a},b.isRawData=function(a){return a.internal_resourceInfo.isRawData},b.isThing=ba,b.isThingLocal=be,b.mockContainerFrom=bI,b.mockFetchError=function(a,b=404){let c=new bG(void 0,{status:b});return new R(`Fetching the Resource at [${a}] failed: [${c.status}] [${c.statusText}].`,c)},b.mockFileFrom=function(a,b){let c=new Blob,d=Object.assign(c,{internal_resourceInfo:{sourceIri:u(a),isRawData:!0,contentType:null==b?void 0:b.contentType,linkedResources:{}}});return d},b.mockSolidDatasetFrom=bH,b.mockThingFrom=function(a){let b=u(a);return{type:"Subject",predicates:{},url:b}},b.overwriteFile=X,b.removeAll=bX,b.removeBoolean=b$,b.removeDate=b0,b.removeDatetime=b_,b.removeDecimal=b2,b.removeInteger=b3,b.removeIri=bZ,b.removeLiteral=b7,b.removeNamedNode=b6,b.removeStringEnglish=function(a,b,c){return b4(a,b,c,"en")},b.removeStringNoLocale=b5,b.removeStringWithLocale=b4,b.removeThing=a8,b.removeTime=b1,b.removeUrl=bY,b.responseToResourceInfo=K,b.responseToSolidDataset=bm,b.saveAclFor=cU,b.saveFileInContainer=W,b.saveSolidDatasetAt=bq,b.saveSolidDatasetInContainer=bu,b.setAgentDefaultAccess=function(a,b,c){return cI(a,c,A.agent,"default",b)},b.setAgentResourceAccess=c_,b.setBoolean=cb,b.setDate=cd,b.setDatetime=cc,b.setDecimal=cf,b.setGroupDefaultAccess=function(a,b,c){return cI(a,c,A.agentGroup,"default",b)},b.setGroupResourceAccess=de,b.setInteger=cg,b.setIri=ca,b.setLiteral=ck,b.setNamedNode=cj,b.setProfileJwks=function(a,b,c){return a7(a,ca(dn(a,b),G.publicKey,c))},b.setPublicDefaultAccess=function(a,b){return cI(a,b,A.agentClass,"default",D.Agent)},b.setPublicResourceAccess=di,b.setStringNoLocale=ci,b.setStringWithLocale=ch,b.setTerm=cl,b.setThing=a7,b.setTime=ce,b.setUrl=b9,b.solidDatasetAsMarkdown=bx,b.solidDatasetAsTurtle=dy,b.thingAsMarkdown=bd,b.toRdfJsDataset=dm,b.universalAccess=h8}}])